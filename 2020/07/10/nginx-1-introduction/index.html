<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Nginx简介 | 余思博客</title><meta name="keywords" content="nginx"><meta name="author" content="余思"><meta name="copyright" content="余思"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="写在前面我们知道在传统的Web服务器中，每个客户端连接需要一个单独的进程或者线程来处理，在切换任务的时候需要将CPU切换到新的任务并创建一个新的运行时上下文，这样不仅会消耗额外的内存还会花费一定的CPU时间。当并发请求增加时，服务器负担将会加重，进而对性能产生一定影响。而本文将学习的Nginx服务器则很好的解决了这个问题。 Nginx简介Nginx是一个高性能的HTTP（处理静态文件）和反向代理（">
<meta property="og:type" content="article">
<meta property="og:title" content="Nginx简介">
<meta property="og:url" content="http://aigoing.chat/2020/07/10/nginx-1-introduction/index.html">
<meta property="og:site_name" content="余思博客">
<meta property="og:description" content="写在前面我们知道在传统的Web服务器中，每个客户端连接需要一个单独的进程或者线程来处理，在切换任务的时候需要将CPU切换到新的任务并创建一个新的运行时上下文，这样不仅会消耗额外的内存还会花费一定的CPU时间。当并发请求增加时，服务器负担将会加重，进而对性能产生一定影响。而本文将学习的Nginx服务器则很好的解决了这个问题。 Nginx简介Nginx是一个高性能的HTTP（处理静态文件）和反向代理（">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png">
<meta property="article:published_time" content="2020-07-10T10:13:01.000Z">
<meta property="article:modified_time" content="2021-03-01T10:27:50.617Z">
<meta property="article:author" content="余思">
<meta property="article:tag" content="nginx">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="http://aigoing.chat/2020/07/10/nginx-1-introduction/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Nginx简介',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-03-01 18:27:50'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="余思博客" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">264</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">20</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">19</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 前端</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/html/"><i class="fa-fw fa fa-cog"></i><span> HTML/CSS</span></a></li><li><a class="site-page child" href="/categories/javascript/"><i class="fa-fw fa fa-cogs"></i><span> JavaScript</span></a></li><li><a class="site-page child" href="/categories/vuejs/"><i class="fa-fw fa fa-certificate"></i><span> Vue.js</span></a></li><li><a class="site-page child" href="/categories/flutter/"><i class="fa-fw fa fa-bullseye"></i><span> Flutter</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> Java</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/java/"><i class="fa-fw fa fa-book"></i><span> Java</span></a></li><li><a class="site-page child" href="/categories/ssm/"><i class="fa-fw fa fa-cube"></i><span> SSM</span></a></li><li><a class="site-page child" href="/categories/springboot/"><i class="fa-fw fa fa-cubes"></i><span> SpringBoot</span></a></li><li><a class="site-page child" href="/categories/springcloud/"><i class="fa-fw fa fa-cloud"></i><span> SpringCloud</span></a></li><li><a class="site-page child" href="/categories/springsecurity/"><i class="fa-fw fa fa-bullseye"></i><span> SpringSecurity</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 运维</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/pythonbase/"><i class="fa-fw fa fa-book"></i><span> Python</span></a></li><li><a class="site-page child" href="/categories/go/"><i class="fa-fw fa fa-google-plus"></i><span> Golang</span></a></li><li><a class="site-page child" href="/categories/devops/"><i class="fa-fw fa fa-road"></i><span> DevOps</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 中间件</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/mysql/"><i class="fa-fw fa fa-database"></i><span> MySQL</span></a></li><li><a class="site-page child" href="/categories/redis/"><i class="fa-fw fa fa-random"></i><span> Redis</span></a></li><li><a class="site-page child" href="/categories/other/"><i class="fa-fw fa fa-location-arrow"></i><span> 其他</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-bell"></i><span> 其他</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/datastructs/"><i class="fa-fw fa fa-plug"></i><span> 算法结构</span></a></li><li><a class="site-page child" href="/categories/tools/"><i class="fa-fw fa fa-hourglass"></i><span> 实用工具</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-address-book"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/onenote/"><i class="fa-fw fa fa-laptop"></i><span> 个人随笔</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-comment"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">余思博客</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 前端</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/html/"><i class="fa-fw fa fa-cog"></i><span> HTML/CSS</span></a></li><li><a class="site-page child" href="/categories/javascript/"><i class="fa-fw fa fa-cogs"></i><span> JavaScript</span></a></li><li><a class="site-page child" href="/categories/vuejs/"><i class="fa-fw fa fa-certificate"></i><span> Vue.js</span></a></li><li><a class="site-page child" href="/categories/flutter/"><i class="fa-fw fa fa-bullseye"></i><span> Flutter</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> Java</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/java/"><i class="fa-fw fa fa-book"></i><span> Java</span></a></li><li><a class="site-page child" href="/categories/ssm/"><i class="fa-fw fa fa-cube"></i><span> SSM</span></a></li><li><a class="site-page child" href="/categories/springboot/"><i class="fa-fw fa fa-cubes"></i><span> SpringBoot</span></a></li><li><a class="site-page child" href="/categories/springcloud/"><i class="fa-fw fa fa-cloud"></i><span> SpringCloud</span></a></li><li><a class="site-page child" href="/categories/springsecurity/"><i class="fa-fw fa fa-bullseye"></i><span> SpringSecurity</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 运维</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/pythonbase/"><i class="fa-fw fa fa-book"></i><span> Python</span></a></li><li><a class="site-page child" href="/categories/go/"><i class="fa-fw fa fa-google-plus"></i><span> Golang</span></a></li><li><a class="site-page child" href="/categories/devops/"><i class="fa-fw fa fa-road"></i><span> DevOps</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 中间件</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/mysql/"><i class="fa-fw fa fa-database"></i><span> MySQL</span></a></li><li><a class="site-page child" href="/categories/redis/"><i class="fa-fw fa fa-random"></i><span> Redis</span></a></li><li><a class="site-page child" href="/categories/other/"><i class="fa-fw fa fa-location-arrow"></i><span> 其他</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-bell"></i><span> 其他</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/datastructs/"><i class="fa-fw fa fa-plug"></i><span> 算法结构</span></a></li><li><a class="site-page child" href="/categories/tools/"><i class="fa-fw fa fa-hourglass"></i><span> 实用工具</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-address-book"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/onenote/"><i class="fa-fw fa fa-laptop"></i><span> 个人随笔</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-comment"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Nginx简介</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-07-10T10:13:01.000Z" title="发表于 2020-07-10 18:13:01">2020-07-10</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-03-01T10:27:50.617Z" title="更新于 2021-03-01 18:27:50">2021-03-01</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/nginx/">nginx</a></span></div><div class="meta-secondline"></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h1><p>我们知道在传统的Web服务器中，每个客户端连接需要一个单独的进程或者线程来处理，在切换任务的时候需要将CPU切换到新的任务并创建一个新的运行时上下文，这样不仅会消耗额外的内存还会花费一定的CPU时间。当并发请求增加时，服务器负担将会加重，进而对性能产生一定影响。而本文将学习的Nginx服务器则很好的解决了这个问题。</p>
<h1 id="Nginx简介"><a href="#Nginx简介" class="headerlink" title="Nginx简介"></a>Nginx简介</h1><p>Nginx是一个高性能的HTTP（处理静态文件）和反向代理（负载均衡）服务器，也是一个IMAP/POP3/SMTP代理服务器。现在大部分的Web服务器都使用Nginx作为负载均衡器。</p>
<h3 id="Nginx特点"><a href="#Nginx特点" class="headerlink" title="Nginx特点"></a>Nginx特点</h3><p><strong>（1）速度更快</strong>。在单次请求下会得到更快的响应，而在高并发环境下，Nginx比其他Web服务器有更快的响应。<br><strong>（2）高扩展性</strong>。Nginx基于模块化设计，由多个耦合度极低的模块组成，具有很高的扩展性。这种强扩展性，非常适合高流量的网站系统。<br><strong>（3）高可靠性</strong>。Nginx的可靠性来源于其核心代码的优秀设计，模块设计的简单性。Nginx官方提供的常用模块非常稳定，每个worker进程相对独立，master进程在一个worker进程出错时可以快速拉起一个新的worker子进程以继续提供服务。<br><strong>（4）低内存消耗</strong>。一般情况下，1万个非活跃的<code>HTTP Keep-Alive</code>连接在Nginx中仅消耗2.5MB的内存，这是Nginx支持高并发的基础。理论上来说Nginx支持的并发上限取决于机器的内存，只要内存足够，单机实现10万、100万以上的并发都是可能的，而实际上10万个并发已经都是基本操作了。<br><strong>（5）热部署</strong>。前面提到master进程和worker进程是分离设计的，这使得Nginx支持热部署，也就是可以在不停掉当前服务的情况下，对Nginx可执行文件进行升级。除此之外，Nginx还支持不停止服务就可以更新配置文件中的配置项，和更换日志文件等功能。<br><strong>（6）使用最自由的BSD协议</strong>。使用BSD协议就意味着用户不仅可以免费使用Nginx，还可以直接或者间接修改Nginx的源码，然后发布使用。<br><strong>（7）CPU亲和</strong>。所谓的CPU亲和是指将CPU核心和Nginx工作进程绑定，将Nginx每个worker进程固定在一个CPU上执行，可以减少切换CPU的cache miss，能获得更好的性能。</p>
<h3 id="Nginx社区分支"><a href="#Nginx社区分支" class="headerlink" title="Nginx社区分支"></a>Nginx社区分支</h3><p>（1）Openresty。作者章宜春，其最大特点就是引入了ngx_lua 模块，支持使用Lua开发插件，且集合了很多丰富的模块以及 Lua库。<br>（2）Tengine。由淘宝团队开发，主要引入了淘宝自身业务需要的新特性。<br>（3）Nginx官方版本。它更新迭代较快，提供免费版本和商业版本。当然在官方版本中也有三种类型：Mainline Version是主线版，也就是开发版；Stable Version是最新稳定版，一般生产环境都使用这个；Legacy Version是历史的稳定老版本。</p>
<h3 id="Nginx主要使用场景"><a href="#Nginx主要使用场景" class="headerlink" title="Nginx主要使用场景"></a>Nginx主要使用场景</h3><p>（1）静态资源服务。通过使用本地文件系统来提供访问静态资源的服务。<br>（2）反向代理服务。这里面较为复杂，包括缓存、负载均衡等。<br>（3）API服务。主要是OpenResty。<br>（4）安全防御。<br>（5）灰度发布。<br>（6）静态化。<br>（7）消息推送。<br>（8）防盗链。<br>（9）智能路由，包括企业级的灰度测试、地图POI一键切流。<br>（10）图片实时压缩。</p>
<h3 id="Nginx的企业应用场景"><a href="#Nginx的企业应用场景" class="headerlink" title="Nginx的企业应用场景"></a>Nginx的企业应用场景</h3><p>（1）作为Web服务软件使用；（2）作为反向代理或者负载均衡服务；（3）作为前端业务数据缓存服务。以上三个应用场景是Nginx在企业开发过程中比较常用的功能。</p>
<h3 id="几个重要的概念"><a href="#几个重要的概念" class="headerlink" title="几个重要的概念"></a>几个重要的概念</h3><p><strong>并发</strong>：指一个时间段内，有几个程序在同一个CPU上运行，但是任意时刻只有一个程序在CPU上运行。</p>
<p><strong>并行</strong>：指在任意的时刻点上，有多个程序运行在多个CPU上面。（与CPU的数量保持一致）。</p>
<p><strong>异步</strong>： 用于多任务情况， 多个任务之间执行没有先后顺序，可以同时运行，执行的先后顺序不会有什么影响，存在多条运行主线；（指代码调用IO操作时，不需要等待IO操作完成，就可以返回的调用方式）（多线程）。</p>
<p><strong>同步</strong>： 用于多任务情况， 多个任务之间执行的时候要求有先后顺序，必须一个先执行完成之后，另一个才能继续执行， 只有一个主线；（指代码调用IO操作时，必须等待IO操作完成，才返回的调用方式）。</p>
<p><strong>阻塞</strong>：从调用者的角度出发，如果在调用的时候，被卡住，不能再继续向下运行，需要等待，就说是阻塞；（调用函数的时候，当前线程被挂起，不能立即返回）。</p>
<p><strong>非阻塞</strong>： 从调用者的角度出发， 如果在调用的时候，没有被卡住，能够继续向下运行，无需等待，就说是非阻塞。（调用函数的时候，当前线程不会被挂起，而是立即返回）。</p>
<h3 id="HTTP的请求与响应报文"><a href="#HTTP的请求与响应报文" class="headerlink" title="HTTP的请求与响应报文"></a>HTTP的请求与响应报文</h3><h5 id="HTTP请求报文"><a href="#HTTP请求报文" class="headerlink" title="HTTP请求报文"></a>HTTP请求报文</h5><p>下面是HTTP请求报文的基本语法：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-5b3623fa7a8fb7ce.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><strong>请求行</strong>：①是请求方法，GET和POST是最常见的HTTP方法，除此以外还包括DELETE、HEAD、OPTIONS、PUT和TRACE；②是请求对应的URL地址，它和报文头的Host属性组成完整的请求URL；③是协议名称及版本号。</p>
<p><strong>请求头</strong>：④是HTTP的报文头，报文头包含若干个属性，格式为“属性名:属性值”，服务端据此获取客户端的信息。请注意与缓存相关的规则信息，均包含在header中。</p>
<p><strong>请求体</strong>：⑤是报文体，它将一个页面表单中的组件值通过<code>param1=value1&amp;param2=value2</code>的键值对形式编码成一个格式化串，它承载多个请求参数的数据。请注意，不仅报文体可以传递请求参数，请求URL也是可以通过类似于<code>/envythink/index.html? param1=value1&amp;param2=value2</code>的方式来传递请求参数。 </p>
<p>将下来简单介绍一下HTTP请求报文头属性：<br>（1）Accept请求报文可通过一个“Accept”报文头属性告诉服务端，客户端可以接受什么类型的响应。举个例子，<code>Accept:text/plain</code>表示告诉服务器，客户端只能接收响应类型仅为纯文本的数据。</p>
<p>实际上Accept属性的值可以为一个或多个MIME类型的值（这些值用于描述消息内容类型的因特网标准， 消息能包含文本、图像、音频、视频以及其他应用程序专用的数据）。</p>
<p>（2）cookie。客户端的Cookie就是通过这个报文头属性传给服务端。这里通常会有一个sessionId，用于告诉服务端如何辨别哪些请求来自于同一个客户端发起的。其实就是通过HTTP请求报文头的Cookie属性中sessioId的值来关联的。其实也可以通过重写URL的方式将会话ID附带在每个URL的后面，不过这种方式不太安全，不建议这么操作。</p>
<p>（3）Referer。Referer表示这个请求是从哪个URL过来的。</p>
<p>（4）Cache-Control。表示对缓存进行控制，如一个请求希望响应返回的内容在客户端要被缓存一年，或不希望被缓存就可以通过设置这个报文头来达到目的。</p>
<h5 id="HTTP响应报文"><a href="#HTTP响应报文" class="headerlink" title="HTTP响应报文"></a>HTTP响应报文</h5><p>HTTP响应报文也是由三部分组成，不同于请求报文中的请求行、请求头和请求体；响应报文包括响应行、响应头和响应体，如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-60d465c227912f52.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><strong>响应行</strong>：其中①报文协议及版本；②状态码及状态描述；</p>
<p><strong>响应头</strong>：其中③响应报文头，也是由多个属性组成；</p>
<p><strong>响应体</strong>：其中④响应报文体，即服务器返回给客户端的数据。</p>
<p>将下来简单介绍一下常见的HTTP响应报文头属性：<br>（1）Cache-Control。又看到这个属性，这里表示响应输出到客户端之后，服务端通过该报文头属性来告诉客户端如何控制响应内容的缓存。</p>
<p>Cache-Control这一属性常见的取值有private、public、no-cache、max-age、no-store，默认值为private。private表示客户端可以缓存；public表示客户端和代理服务器都可以缓存；no-cache表示需要使用对比缓存来验证缓存数据；max-age表示缓存的内容将在max-age秒之后失效；no-store表示所有的内容都不会缓存。</p>
<p>前面也说了默认值为private，缓存时间为31536000秒，也就是365天，也就是说在365天之内，再次请求这条数据，都会直接从缓存数据库中获取数据并使用。<br>（2）ETag。它代表一个响应服务端资源，如页面版本的报文属性，如果某个服务端资源发生了变化，那么这个ETag就会发生变化。可以将这个ETag作为Cache-Control的补充，它可以让客户端更智能的知道，什么时候从服务端获取资源，什么时候可以直接从缓存中返回响应。<br>（3）Location。如果你之前使用过JSP，且需要让A页面Redirect到B页面，此时其实就是让客户端再发起一个请求到A页面，那么就需要Redirect到A页面的URL，说白了就是通过响应报文头的Location属性来告知客户端。举个例子，下面的报文属性就是将客户端Redirect到envythink的首页：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Location: http://www.envythink.com </span><br></pre></td></tr></table></figure>
<p>（4）Set-Cookie。服务端可以设置客户端的Cookie，其原理就是通过这个响应报文头属性来实现的。</p>
<p>（5）Cookie机制。客户端请求服务器，如果服务器需要记录该用户状态，就可以使用Response向客户端浏览器颁发一个Cookie。客户端浏览器会把Cookie保存起来，当浏览器再次请求该网站时，浏览器把请求的网址连同该Cookie一同提交给服务器。服务器会检查该Cookie并据此来辨认用户状态。当然服务器还可以根据需要修改Cookie的内容。</p>
<p>Cookie的maxAge决定Cookie的有效期，单位为秒(Second）。Cookie可以通过<code>getMaxAge()</code>与<code>setMaxAge(int maxAge)</code>方法来读写maxAge属性。</p>
<p>如果maxAge属性为正数，则表示该Cookie会在maxAge秒之后自动失效。如果maxAge为负数，则表示该Cookie仅在本浏览器窗口以及本窗口打开的子窗口内有效，关闭窗口后该Cookie立即失效。如果maxAge为0，则表示删除该Cookie。</p>
<p>请注意，Cookie并不提供修改和删除操作，如果需要修改某个Cookie，只需要新建一个同名的Cookie，然后添加到Response中来覆盖之前的Cookie。如果要删除某个Cookie，只需要新建一个同名的Cookie，并将maxAge设置为0，并添加到到Response中来覆盖之前的Cookie。举个例子，如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 新建一个Cookie</span><br><span class="line">Cookie cookie = new Cookie(&quot;username&quot;,&quot;envy&quot;);</span><br><span class="line"># 设置Cookie的生命周期为0，注意不能为负数</span><br><span class="line">cookie.setMaxAge(0);</span><br><span class="line"># 将cookie输出到客户端</span><br><span class="line">response.addCookie(cookie);</span><br></pre></td></tr></table></figure>
<h1 id="简单请求和非简单请求"><a href="#简单请求和非简单请求" class="headerlink" title="简单请求和非简单请求"></a>简单请求和非简单请求</h1><p>在学习了上述HTTP请求和响应报文之后，接下来就来了解简单请求和非简单请求。为什么需要区分简单请求和非简单请求，那是因为浏览器处理简单请求和非简单请求的方式不一样。</p>
<p>如果某个请求同时满足下面两个条件，那么该请求就属于简单请求：<br>（1）请求方法是GET、POST或者HEAD三者中的任意一个；<br>（2）HTTP头信息不超过下面几个字段：<code>Accept</code>、<code>Accept-Language</code>、<code>Content-Language</code>、<code>Last-Event-IDContent-Type</code>。请注意<code>Last-Event-IDContent-Type</code>只限于三个值<code>application/x-www-form-urlencoded</code>、<code>multipart/form-data</code>、<code>text/plain</code>；</p>
<p>除此之外，凡是不同时满足这两个条件的，都属于非简单请求。</p>
<p>前面说过浏览器会针对这两种请求采取不同的处理方式，那么具体的处理方式又是怎样的呢？</p>
<h3 id="简单请求"><a href="#简单请求" class="headerlink" title="简单请求"></a>简单请求</h3><p>对于简单请求来说，浏览器会在其头信息中增加Origin字段后直接发出，Origin字段用来说明本次请求来自哪个源（协议+域名+端口）。</p>
<p>如果服务器发现<code>Origin</code>指定的源不在许可范围内，服务器会返回一个正常的HTTP回应，浏览器取到回应之后发现回应的头信息中没有包含<code>Access-Control-Allow-Origin</code>字段，就抛出一个错误给XHR的error事件；</p>
<p>如果服务器发现<code>Origin</code>指定的域名在许可范围内，那么服务器返回的响应会多出几个以<code>Access-Control-</code>开头的头信息字段。</p>
<h3 id="非简单请求"><a href="#非简单请求" class="headerlink" title="非简单请求"></a>非简单请求</h3><p>说完了简单请求，接下来开始学习非简单请求，非简单请求是指对服务器有特殊要求的请求。举个例子，如请求方法是PUT、DELETE或者<code>Content-Type</code>值为<code>application/json</code>中的某种时，浏览器会在正式通信之前，发送一次HTTP预检OPTIONS请求，先询问服务器，当前网页所在的域名是否在服务器的许可名单之中，以及可以使用哪些 HTTP请求方法和头信息字段。只有得到肯定答复，浏览器才会发出正式的XHR请求，否则报错。</p>
<h1 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h1><p>所谓的跨域请求是指在浏览器上当前访问的网站向另一个网站发送请求获取数据的过程。</p>
<p>跨域是浏览器的同源策略决定的，它是一个重要的浏览器安全策略，用于限制一个<code>Origin</code>的文档或者它加载的脚本与另一个源的资源进行交互，它能够帮助阻隔恶意文档，减少可能被攻击的媒介，如果开发者不需要跨域这个安全设置，那么可以使CORS配置来解除这个限制。</p>
<p>关于跨域大家可以参看MDN的 &lt;浏览器的同源策略&gt; 文档，这里仅仅列举几个同源和不同源的例子，来加深大家的理解和印象：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 同源的例子</span><br><span class="line">http://example.com/app1/index.html  # 只是路径不同</span><br><span class="line">http://example.com/app2/index.html</span><br><span class="line"></span><br><span class="line">http://Example.com:80  # 只是大小写差异</span><br><span class="line">http://example.com</span><br><span class="line"></span><br><span class="line"># 不同源的例子</span><br><span class="line">http://example.com/app1   # 协议不同</span><br><span class="line">https://example.com/app2</span><br><span class="line"></span><br><span class="line">http://example.com        # host 不同</span><br><span class="line">http://www.example.com</span><br><span class="line">http://myapp.example.com</span><br><span class="line"></span><br><span class="line">http://example.com        # 端口不同</span><br><span class="line">http://example.com:8080</span><br></pre></td></tr></table></figure>
<h1 id="正向代理和反向代理"><a href="#正向代理和反向代理" class="headerlink" title="正向代理和反向代理"></a>正向代理和反向代理</h1><p>正向代理和反向代理这两个概念看起来挺高大上的，其实用户在无形中肯定都使用过这两种代理。</p>
<h3 id="正向代理"><a href="#正向代理" class="headerlink" title="正向代理"></a>正向代理</h3><p>正向代理（Forward Proxy）：通常来说，一般的访问流程都是客户端直接向目标服务器发送请求并获取内容。如果使用正向代理，那么客户端不再直接向目标服务器发送请求，而是向代理服务器发送请求，并指定目标服务器（目标服务器是原始服务器），然后由目标服务器和原始服务器进行通信，转交请求并获得内容，之后再将内容返回给客户端。也就是说，正向代理隐藏了真实的客户端，为客户端收发请求，使真实的客户端对服务器不可见。</p>
<p>举一个常见的例子，你的浏览器无法直接访问谷歌，但是你通过某科学上网工具就可以连接了，那么这里的工具其实就是一个正向代理服务器：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-5dd8d118beabe4a5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h3 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a>反向代理</h3><p>反向代理（Reverse Proxy）：与一般的访问流程相比，使用反向代理后，直接收到请求的服务器是代理服务器，然后代理服务器将请求转发给内部网络上真正进行处理的服务器，并将得到的结果返回给客户端。也就是说，反向代理隐藏了真实的服务器，为服务器收发请求，使真实服务器对客户端不可见。反向代理一般用在需要处理跨域请求的时候，现在基本上大型的网站都设置了反向代理。</p>
<p>举个例子，当你拨打10086客服电话的时候，其实这个10086号码就相当于是一个代理，而真正提供服务的是话务员，对于客户来说，他不关心具体是哪个话务员提供的服务，他只需要记住10086这个号码即可。也就是说，当所有的请求都到10086这一号码的时候，它会将这些请求转发给某一个具体的话务员去处理，因此这里的10086号码其实就是一个代理，不过它代理的不是客户端，而是话务员，这种形式的代理我们称之为反向代理：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-6c00d65b633fc27f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>关于正向代理和反向代理的主要区别，可以参看如下图片：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-b46efb7138c47dd4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h3 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h3><p>一般情况下，客户端发送多个请求到服务器，服务器将处理这些请求，不过其中一部分请求可能要操作一些资源，如数据库、静态资源等，服务器处理完成请求后，再将结果返回给客户端。</p>
<p>对于早期的系统来说，由于功能不复杂，且并发请求相对较少，因此上述模式可以适用。但是随着业务不断更迭、访问量和数据量也在飞速发展，此时这种模式已经无法满足实际要求，当并发量比较大的时候，服务器非常容易发生宕机和崩溃。</p>
<p>很明显这就是服务器性能瓶颈带来的访问过载，除了不断加机器之外，还需要使用负载均衡来解决这一问题。</p>
<p>在请求数量达到指数级增长的时候，单个机器性能再优秀也无法满足需求，这时就必须采用集群的方式，将请求分发到多个机器上，其实就是将负载分发到多个机器上，这就是负载均衡。负载均衡的核心就是分摊压力。一般来说，Nginx实现负载均衡就是将请求转发给多个服务器，也就是服务器集群。</p>
<p>举一个司空见惯的例子，当你早高峰乘坐地铁的时候，工作人员会拿着大喇叭告诉你：“请往车厢两边走，两边人少，便于您乘车。”这里工作人员的作用就是负载均衡，非常形象生动，便于理解：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-409c828ed55b06dd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h3 id="动静分离"><a href="#动静分离" class="headerlink" title="动静分离"></a>动静分离</h3><p>一般来说，为了加快网站的解析速度，开发者可以将动态页面和静态页面交由不同的服务器来解析，以降低原来单个服务的压力。常见的静态资源有html、img、js、css等；动态资源有jsp、servlet、ftl等。</p>
<p>在一些大型的网站架构中，都会将动态资源和静态资源分离开，然后借助于Nginx的高并发和静态资源缓存等特性，将静态资源部署在Nginx上。这样如果请求的是静态资源，则会直接去静态资源目录获取资源；如果请求的是动态资源，则利用反向代理将请求转发到对应的后台应用去处理，进而实现动静分离。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-b09e10a3373473af.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>使用前后端分离架构，可以在很大程度上提升静态资源的访问速度，同时即使动态服务不可用，静态资源的访问也不会受到影响。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://aigoing.chat">余思</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://aigoing.chat/2020/07/10/nginx-1-introduction/">http://aigoing.chat/2020/07/10/nginx-1-introduction/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://aigoing.chat" target="_blank">余思博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/nginx/">nginx</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/07/12/nginx-2-nginx-installation-and-function-module-introduction/"><img class="prev-cover" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Nginx安装和功能模块介绍</div></div></a></div><div class="next-post pull-right"><a href="/2020/06/08/mysql-22-index-2/"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">索引原理</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2020/07/30/nginx-10-security-optimization/" title="Nginx安全优化"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-30</div><div class="title">Nginx安全优化</div></div></a></div><div><a href="/2020/08/01/nginx-11-security-chain-and-crawler-and-virtual-directory/" title="Nginx防盗链、爬虫和虚拟目录"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-08-01</div><div class="title">Nginx防盗链、爬虫和虚拟目录</div></div></a></div><div><a href="/2020/08/05/nginx-12-file-access-control-and-structure-optimization-and-mobile-adaptation/" title="Nginx文件访问控制、结构优化和适配移动端"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-08-05</div><div class="title">Nginx文件访问控制、结构优化和适配移动端</div></div></a></div><div><a href="/2020/08/08/nginx-13-nginx-running-state-and-nginx-web-ui/" title="Nginx运行状态和NginxWebUI"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-08-08</div><div class="title">Nginx运行状态和NginxWebUI</div></div></a></div><div><a href="/2020/08/10/nginx-14-ssl-configuration-and-pan-domain-name-and-static-service/" title="SSL配置、泛域名和静态服务"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-08-10</div><div class="title">SSL配置、泛域名和静态服务</div></div></a></div><div><a href="/2020/07/12/nginx-2-nginx-installation-and-function-module-introduction/" title="Nginx安装和功能模块介绍"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-07-12</div><div class="title">Nginx安装和功能模块介绍</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">余思</div><div class="author-info__description">记录成长路上的点滴</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">264</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">20</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">19</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:envyzhan@aliyun.com" target="_blank" title=""><i class="fa fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title=""><i class="fa fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎访问余思博客，一个技术博主的成长试验田！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2"><span class="toc-number">1.</span> <span class="toc-text">写在前面</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Nginx%E7%AE%80%E4%BB%8B"><span class="toc-number">2.</span> <span class="toc-text">Nginx简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Nginx%E7%89%B9%E7%82%B9"><span class="toc-number">2.0.1.</span> <span class="toc-text">Nginx特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Nginx%E7%A4%BE%E5%8C%BA%E5%88%86%E6%94%AF"><span class="toc-number">2.0.2.</span> <span class="toc-text">Nginx社区分支</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Nginx%E4%B8%BB%E8%A6%81%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">2.0.3.</span> <span class="toc-text">Nginx主要使用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Nginx%E7%9A%84%E4%BC%81%E4%B8%9A%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">2.0.4.</span> <span class="toc-text">Nginx的企业应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%A0%E4%B8%AA%E9%87%8D%E8%A6%81%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">2.0.5.</span> <span class="toc-text">几个重要的概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP%E7%9A%84%E8%AF%B7%E6%B1%82%E4%B8%8E%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87"><span class="toc-number">2.0.6.</span> <span class="toc-text">HTTP的请求与响应报文</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#HTTP%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87"><span class="toc-number">2.0.6.0.1.</span> <span class="toc-text">HTTP请求报文</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#HTTP%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87"><span class="toc-number">2.0.6.0.2.</span> <span class="toc-text">HTTP响应报文</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E8%AF%B7%E6%B1%82%E5%92%8C%E9%9D%9E%E7%AE%80%E5%8D%95%E8%AF%B7%E6%B1%82"><span class="toc-number">3.</span> <span class="toc-text">简单请求和非简单请求</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E8%AF%B7%E6%B1%82"><span class="toc-number">3.0.1.</span> <span class="toc-text">简单请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E7%AE%80%E5%8D%95%E8%AF%B7%E6%B1%82"><span class="toc-number">3.0.2.</span> <span class="toc-text">非简单请求</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B7%A8%E5%9F%9F"><span class="toc-number">4.</span> <span class="toc-text">跨域</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86%E5%92%8C%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86"><span class="toc-number">5.</span> <span class="toc-text">正向代理和反向代理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86"><span class="toc-number">5.0.1.</span> <span class="toc-text">正向代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86"><span class="toc-number">5.0.2.</span> <span class="toc-text">反向代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1"><span class="toc-number">5.0.3.</span> <span class="toc-text">负载均衡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E9%9D%99%E5%88%86%E7%A6%BB"><span class="toc-number">5.0.4.</span> <span class="toc-text">动静分离</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/04/06/2025-4-practical-implementation-of-local-tool-call-using-springboot-MCP/" title="SpringBoot+MCP实现本地工具调用实战"><img src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringBoot+MCP实现本地工具调用实战"/></a><div class="content"><a class="title" href="/2025/04/06/2025-4-practical-implementation-of-local-tool-call-using-springboot-MCP/" title="SpringBoot+MCP实现本地工具调用实战">SpringBoot+MCP实现本地工具调用实战</a><time datetime="2025-04-06T10:03:01.000Z" title="发表于 2025-04-06 18:03:01">2025-04-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/01/2025-3-let's-talk-about-the-recently-popular-MCP-protocol/" title="聊一聊最近很火的MCP协议"><img src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="聊一聊最近很火的MCP协议"/></a><div class="content"><a class="title" href="/2025/03/01/2025-3-let's-talk-about-the-recently-popular-MCP-protocol/" title="聊一聊最近很火的MCP协议">聊一聊最近很火的MCP协议</a><time datetime="2025-03-01T11:05:08.000Z" title="发表于 2025-03-01 19:05:08">2025-03-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/02/23/2025-2-how-to-set-up-LLM-locally-and-use-it/" title="如何在本地搭建LLM并使用"><img src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="如何在本地搭建LLM并使用"/></a><div class="content"><a class="title" href="/2025/02/23/2025-2-how-to-set-up-LLM-locally-and-use-it/" title="如何在本地搭建LLM并使用">如何在本地搭建LLM并使用</a><time datetime="2025-02-23T09:03:01.000Z" title="发表于 2025-02-23 17:03:01">2025-02-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/01/11/2025-1-let's-talk-about-three-commonly-used-real-time-technologies/" title="聊一聊常用的3种实时技术"><img src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="聊一聊常用的3种实时技术"/></a><div class="content"><a class="title" href="/2025/01/11/2025-1-let's-talk-about-three-commonly-used-real-time-technologies/" title="聊一聊常用的3种实时技术">聊一聊常用的3种实时技术</a><time datetime="2025-01-11T10:03:01.000Z" title="发表于 2025-01-11 18:03:01">2025-01-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/21/2024-11-6-ways-to-synchronize-es-with-mysql/" title="MySQL同步ES的6种方式"><img src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL同步ES的6种方式"/></a><div class="content"><a class="title" href="/2024/12/21/2024-11-6-ways-to-synchronize-es-with-mysql/" title="MySQL同步ES的6种方式">MySQL同步ES的6种方式</a><time datetime="2024-12-21T10:23:04.000Z" title="发表于 2024-12-21 18:23:04">2024-12-21</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2017 - 2025  余思博客,记录成长</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk(Object.assign({
      clientID: '9996b44b488f2fc52124',
      clientSecret: '6bec0f8e9c032eeae6211a5d4cffa3c97e2d4a64',
      repo: 'blogcomment',
      owner: 'Envythink',
      admin: ['Envythink'],
      id: '9bc5fab924f40fbf8c754d1a5b88cdda',
      updateCountCallback: commentCount
    },))

    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    getScript('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Gitalk' === 'Gitalk' || !false) {
  if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script></div></div></body></html>