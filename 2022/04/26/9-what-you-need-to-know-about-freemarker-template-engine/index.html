<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>关于Freemarker模板引擎，需要知道这些 | 余思博客</title><meta name="keywords" content="springboot"><meta name="author" content="余思"><meta name="copyright" content="余思"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="写在前面尽管在目前企业级的应用开发中，前后端分离是趋势，但是视图层技术还是占用一席之地。SpringBoot对视图层技术也提供了很好的支持，官方推荐使用的模板引擎是Thymeleaf，但是FreeMaker也支持，当然你可以像SSM中使用JSP等，但是非常不推荐使用。 FreeMarkerFreeMarker简介FreeMarker是一个非常古老的Java模板引擎，可以用在Web或者非Web环境中">
<meta property="og:type" content="article">
<meta property="og:title" content="关于Freemarker模板引擎，需要知道这些">
<meta property="og:url" content="http://envyzhan.asia/2022/04/26/9-what-you-need-to-know-about-freemarker-template-engine/index.html">
<meta property="og:site_name" content="余思博客">
<meta property="og:description" content="写在前面尽管在目前企业级的应用开发中，前后端分离是趋势，但是视图层技术还是占用一席之地。SpringBoot对视图层技术也提供了很好的支持，官方推荐使用的模板引擎是Thymeleaf，但是FreeMaker也支持，当然你可以像SSM中使用JSP等，但是非常不推荐使用。 FreeMarkerFreeMarker简介FreeMarker是一个非常古老的Java模板引擎，可以用在Web或者非Web环境中">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png">
<meta property="article:published_time" content="2022-04-26T09:55:30.000Z">
<meta property="article:modified_time" content="2022-09-12T08:18:03.557Z">
<meta property="article:author" content="余思">
<meta property="article:tag" content="springboot">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="http://envyzhan.asia/2022/04/26/9-what-you-need-to-know-about-freemarker-template-engine/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '关于Freemarker模板引擎，需要知道这些',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-09-12 16:18:03'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="余思博客" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">249</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">19</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">18</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 前端</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/html/"><i class="fa-fw fa fa-cog"></i><span> HTML/CSS</span></a></li><li><a class="site-page child" href="/categories/javascript/"><i class="fa-fw fa fa-cogs"></i><span> JavaScript</span></a></li><li><a class="site-page child" href="/categories/vuejs/"><i class="fa-fw fa fa-certificate"></i><span> Vue.js</span></a></li><li><a class="site-page child" href="/categories/flutter/"><i class="fa-fw fa fa-bullseye"></i><span> Flutter</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> Java</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/java/"><i class="fa-fw fa fa-book"></i><span> Java</span></a></li><li><a class="site-page child" href="/categories/ssm/"><i class="fa-fw fa fa-cube"></i><span> SSM</span></a></li><li><a class="site-page child" href="/categories/springboot/"><i class="fa-fw fa fa-cubes"></i><span> SpringBoot</span></a></li><li><a class="site-page child" href="/categories/springcloud/"><i class="fa-fw fa fa-cloud"></i><span> SpringCloud</span></a></li><li><a class="site-page child" href="/categories/springsecurity/"><i class="fa-fw fa fa-bullseye"></i><span> SpringSecurity</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 运维</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/pythonbase/"><i class="fa-fw fa fa-book"></i><span> Python</span></a></li><li><a class="site-page child" href="/categories/go/"><i class="fa-fw fa fa-google-plus"></i><span> Golang</span></a></li><li><a class="site-page child" href="/categories/devops/"><i class="fa-fw fa fa-road"></i><span> DevOps</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 中间件</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/mysql/"><i class="fa-fw fa fa-database"></i><span> MySQL</span></a></li><li><a class="site-page child" href="/categories/redis/"><i class="fa-fw fa fa-random"></i><span> Redis</span></a></li><li><a class="site-page child" href="/categories/other/"><i class="fa-fw fa fa-location-arrow"></i><span> 其他</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-bell"></i><span> 其他</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/datastructs/"><i class="fa-fw fa fa-plug"></i><span> 算法结构</span></a></li><li><a class="site-page child" href="/categories/tools/"><i class="fa-fw fa fa-hourglass"></i><span> 实用工具</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-address-book"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/onenote/"><i class="fa-fw fa fa-laptop"></i><span> 个人随笔</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-comment"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">余思博客</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 前端</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/html/"><i class="fa-fw fa fa-cog"></i><span> HTML/CSS</span></a></li><li><a class="site-page child" href="/categories/javascript/"><i class="fa-fw fa fa-cogs"></i><span> JavaScript</span></a></li><li><a class="site-page child" href="/categories/vuejs/"><i class="fa-fw fa fa-certificate"></i><span> Vue.js</span></a></li><li><a class="site-page child" href="/categories/flutter/"><i class="fa-fw fa fa-bullseye"></i><span> Flutter</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> Java</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/java/"><i class="fa-fw fa fa-book"></i><span> Java</span></a></li><li><a class="site-page child" href="/categories/ssm/"><i class="fa-fw fa fa-cube"></i><span> SSM</span></a></li><li><a class="site-page child" href="/categories/springboot/"><i class="fa-fw fa fa-cubes"></i><span> SpringBoot</span></a></li><li><a class="site-page child" href="/categories/springcloud/"><i class="fa-fw fa fa-cloud"></i><span> SpringCloud</span></a></li><li><a class="site-page child" href="/categories/springsecurity/"><i class="fa-fw fa fa-bullseye"></i><span> SpringSecurity</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 运维</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/pythonbase/"><i class="fa-fw fa fa-book"></i><span> Python</span></a></li><li><a class="site-page child" href="/categories/go/"><i class="fa-fw fa fa-google-plus"></i><span> Golang</span></a></li><li><a class="site-page child" href="/categories/devops/"><i class="fa-fw fa fa-road"></i><span> DevOps</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 中间件</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/mysql/"><i class="fa-fw fa fa-database"></i><span> MySQL</span></a></li><li><a class="site-page child" href="/categories/redis/"><i class="fa-fw fa fa-random"></i><span> Redis</span></a></li><li><a class="site-page child" href="/categories/other/"><i class="fa-fw fa fa-location-arrow"></i><span> 其他</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-bell"></i><span> 其他</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/datastructs/"><i class="fa-fw fa fa-plug"></i><span> 算法结构</span></a></li><li><a class="site-page child" href="/categories/tools/"><i class="fa-fw fa fa-hourglass"></i><span> 实用工具</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-address-book"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/onenote/"><i class="fa-fw fa fa-laptop"></i><span> 个人随笔</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-comment"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">关于Freemarker模板引擎，需要知道这些</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-04-26T09:55:30.000Z" title="发表于 2022-04-26 17:55:30">2022-04-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-09-12T08:18:03.557Z" title="更新于 2022-09-12 16:18:03">2022-09-12</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/springboot/">springboot</a></span></div><div class="meta-secondline"></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h1><p>尽管在目前企业级的应用开发中，前后端分离是趋势，但是视图层技术还是占用一席之地。SpringBoot对视图层技术也提供了很好的支持，官方推荐使用的模板引擎是Thymeleaf，但是FreeMaker也支持，当然你可以像SSM中使用JSP等，但是非常不推荐使用。</p>
<h1 id="FreeMarker"><a href="#FreeMarker" class="headerlink" title="FreeMarker"></a>FreeMarker</h1><h3 id="FreeMarker简介"><a href="#FreeMarker简介" class="headerlink" title="FreeMarker简介"></a>FreeMarker简介</h3><p>FreeMarker是一个非常古老的Java模板引擎，可以用在Web或者非Web环境中。与Thymeleaf不同的是FreeMarker需要经过解析才能够在浏览器中展示出来。FreeMarker不仅可以用来配置HTML页面模板，也可以作为电子邮箱模板、配置文件模板以及源码模板等。正是由于它可以适应不同的应用场景，因此它虽然古老但是依旧还是有人愿意使用它。</p>
<p>下面是一张摘自FreeMarker官网的图片：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-45e88181a0d1c2ee.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>可以看到FreeMarker可以将模板（Template）和数据（Java Objects）进行渲染为HTML页面。</p>
<h3 id="FreeMarker模板文件及存放位置"><a href="#FreeMarker模板文件及存放位置" class="headerlink" title="FreeMarker模板文件及存放位置"></a>FreeMarker模板文件及存放位置</h3><p>查看一下这个<code>spring-boot-autoconfigure</code>依赖的<code>META-INF</code>文件夹下面的<code>spring.factories</code>文件，里面有如下配置信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># Template availability providers</span><br><span class="line">org.springframework.boot.autoconfigure.template.TemplateAvailabilityProvider=\</span><br><span class="line">org.springframework.boot.autoconfigure.freemarker.FreeMarkerTemplateAvailabilityProvider,\</span><br></pre></td></tr></table></figure>
<p>然后进入查看一下这个类，源码如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">public class FreeMarkerTemplateAvailabilityProvider extends PathBasedTemplateAvailabilityProvider &#123;</span><br><span class="line">    public FreeMarkerTemplateAvailabilityProvider() &#123;</span><br><span class="line">        super(&quot;freemarker.template.Configuration&quot;, FreeMarkerTemplateAvailabilityProvider.FreeMarkerTemplateAvailabilityProperties.class, &quot;spring.freemarker&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    protected static final class FreeMarkerTemplateAvailabilityProperties extends TemplateAvailabilityProperties &#123;</span><br><span class="line">        private List&lt;String&gt; templateLoaderPath = new ArrayList(Arrays.asList(&quot;classpath:/templates/&quot;));</span><br><span class="line"></span><br><span class="line">        FreeMarkerTemplateAvailabilityProperties() &#123;</span><br><span class="line">            super(&quot;&quot;, &quot;.ftlh&quot;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        protected List&lt;String&gt; getLoaderPath() &#123;</span><br><span class="line">            return this.templateLoaderPath;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public List&lt;String&gt; getTemplateLoaderPath() &#123;</span><br><span class="line">            return this.templateLoaderPath;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        public void setTemplateLoaderPath(List&lt;String&gt; templateLoaderPath) &#123;</span><br><span class="line">            this.templateLoaderPath = templateLoaderPath;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以看到FreeMarker模板后缀为<code>ftlh</code>（FreeMarker Template Language）。FTL是一种简单专用的语言，不是编程语言，因此在模板中开发者只需专注于如何展现数据， 而数据的获取则在模板之外确定。FreeMarker模板文件的存放路径位于<code>classpath:/templates/</code>路径下，这一点需要引起注意。</p>
<h3 id="小试牛刀"><a href="#小试牛刀" class="headerlink" title="小试牛刀"></a>小试牛刀</h3><p><strong>第一步</strong>，新建一个名为<code>learn-freemarker</code>的SpringBoot项目，然后在POM文件中新增FreeMarker和Web依赖：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-freemarker&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<p>接着继续查看这个<code>spring-boot-autoconfigure</code>依赖的<code>META-INF</code>文件夹下面的<code>spring.factories</code>文件中关于FreeMarker的自动配置类<code>FreeMarkerAutoConfiguration</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># Auto Configure</span><br><span class="line">org.springframework.boot.autoconfigure.EnableAutoConfiguration=\</span><br><span class="line">org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration,\</span><br></pre></td></tr></table></figure>
<p>查看一下这个<code>FreeMarkerAutoConfiguration</code>自动配置类的源码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">@Configuration(</span><br><span class="line">    proxyBeanMethods = false</span><br><span class="line">)</span><br><span class="line">@ConditionalOnClass(&#123;freemarker.template.Configuration.class, FreeMarkerConfigurationFactory.class&#125;)</span><br><span class="line">@EnableConfigurationProperties(&#123;FreeMarkerProperties.class&#125;)</span><br><span class="line">@Import(&#123;FreeMarkerServletWebConfiguration.class, FreeMarkerReactiveWebConfiguration.class, FreeMarkerNonWebConfiguration.class&#125;)</span><br><span class="line">public class FreeMarkerAutoConfiguration &#123;</span><br><span class="line">    private static final Log logger = LogFactory.getLog(FreeMarkerAutoConfiguration.class);</span><br><span class="line">    private final ApplicationContext applicationContext;</span><br><span class="line">    private final FreeMarkerProperties properties;</span><br><span class="line"></span><br><span class="line">    //有参构造方法注入ApplicationContext、FreeMarkerProperties对象</span><br><span class="line">    public FreeMarkerAutoConfiguration(ApplicationContext applicationContext, FreeMarkerProperties properties) &#123;</span><br><span class="line">        this.applicationContext = applicationContext;</span><br><span class="line">        this.properties = properties;</span><br><span class="line">        this.checkTemplateLocationExists();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //检查模板存放位置是否存在</span><br><span class="line">    public void checkTemplateLocationExists() &#123;</span><br><span class="line">        if (logger.isWarnEnabled() &amp;&amp; this.properties.isCheckTemplateLocation()) &#123;</span><br><span class="line">            List&lt;TemplateLocation&gt; locations = this.getLocations();</span><br><span class="line">            if (locations.stream().noneMatch(this::locationExists)) &#123;</span><br><span class="line">                logger.warn(&quot;Cannot find template location(s): &quot; + locations + &quot; (please add some templates, check your FreeMarker configuration, or set spring.freemarker.checkTemplateLocation=false)&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //获取模板的位置</span><br><span class="line">    private List&lt;TemplateLocation&gt; getLocations() &#123;</span><br><span class="line">        List&lt;TemplateLocation&gt; locations = new ArrayList();</span><br><span class="line">        String[] var2 = this.properties.getTemplateLoaderPath();</span><br><span class="line">        int var3 = var2.length;</span><br><span class="line"></span><br><span class="line">        for(int var4 = 0; var4 &lt; var3; ++var4) &#123;</span><br><span class="line">            String templateLoaderPath = var2[var4];</span><br><span class="line">            TemplateLocation location = new TemplateLocation(templateLoaderPath);</span><br><span class="line">            locations.add(location);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return locations;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //是否存在模板位置</span><br><span class="line">    private boolean locationExists(TemplateLocation location) &#123;</span><br><span class="line">        return location.exists(this.applicationContext);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从里面可以看出，当classpath下面存在<code>freemarker.template.Configuration</code>和<code>FreeMarkerConfigurationFactory</code>类时，这个自动配置类才会生效，实际上这两个类在我们引入freemarker场景启动器时就已经存在了。属性POJO类则是FreeMarkerProperties，到时候开发者需要重写配置项的时候可以从该类中进行查阅。</p>
<p>同时还导入了<code>FreeMarkerServletWebConfiguration</code>、<code>FreeMarkerReactiveWebConfiguration</code>和<code>FreeMarkerNonWebConfiguration</code>这三个类，由于我们使用的是普通的Web项目，因此真正用到的还是<code>FreeMarkerServletWebConfiguration</code>这个类。查看一下这个类的源码，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">@Configuration(</span><br><span class="line">    proxyBeanMethods = false</span><br><span class="line">)</span><br><span class="line">@ConditionalOnWebApplication(</span><br><span class="line">    type = Type.SERVLET</span><br><span class="line">)</span><br><span class="line">@ConditionalOnClass(&#123;Servlet.class, FreeMarkerConfigurer.class&#125;)</span><br><span class="line">@AutoConfigureAfter(&#123;WebMvcAutoConfiguration.class&#125;)</span><br><span class="line">class FreeMarkerServletWebConfiguration extends AbstractFreeMarkerConfiguration &#123;</span><br><span class="line">    protected FreeMarkerServletWebConfiguration(FreeMarkerProperties properties) &#123;</span><br><span class="line">        super(properties);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    @ConditionalOnMissingBean(&#123;FreeMarkerConfig.class&#125;)</span><br><span class="line">    FreeMarkerConfigurer freeMarkerConfigurer() &#123;</span><br><span class="line">        FreeMarkerConfigurer configurer = new FreeMarkerConfigurer();</span><br><span class="line">        this.applyProperties(configurer);</span><br><span class="line">        return configurer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    freemarker.template.Configuration freeMarkerConfiguration(FreeMarkerConfig configurer) &#123;</span><br><span class="line">        return configurer.getConfiguration();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    @ConditionalOnMissingBean(</span><br><span class="line">        name = &#123;&quot;freeMarkerViewResolver&quot;&#125;</span><br><span class="line">    )</span><br><span class="line">    @ConditionalOnProperty(</span><br><span class="line">        name = &#123;&quot;spring.freemarker.enabled&quot;&#125;,</span><br><span class="line">        matchIfMissing = true</span><br><span class="line">    )</span><br><span class="line">    FreeMarkerViewResolver freeMarkerViewResolver() &#123;</span><br><span class="line">        FreeMarkerViewResolver resolver = new FreeMarkerViewResolver();</span><br><span class="line">        this.getProperties().applyToMvcViewResolver(resolver);</span><br><span class="line">        return resolver;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Bean</span><br><span class="line">    @ConditionalOnEnabledResourceChain</span><br><span class="line">    @ConditionalOnMissingFilterBean(&#123;ResourceUrlEncodingFilter.class&#125;)</span><br><span class="line">    FilterRegistrationBean&lt;ResourceUrlEncodingFilter&gt; resourceUrlEncodingFilter() &#123;</span><br><span class="line">        FilterRegistrationBean&lt;ResourceUrlEncodingFilter&gt; registration = new FilterRegistrationBean(new ResourceUrlEncodingFilter(), new ServletRegistrationBean[0]);</span><br><span class="line">        registration.setDispatcherTypes(DispatcherType.REQUEST, new DispatcherType[]&#123;DispatcherType.ERROR&#125;);</span><br><span class="line">        return registration;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>简单解释一下上述代码的含义：<br>（1）<code>@Configuration</code>注解表示当前类为一个配置类，可以被Spring扫描的到；<br>（2）<code>@ConditionalOnWebApplication</code>表示当前配置类在Web环境下才生效；<br>（3）<code>@ConditionalOnClass</code>表示当前环境中只有存在Servlet和FreeMarkerConfigurer时才会生效；<br>（4）<code>@AutoConfigureAfter(&#123;WebMvcAutoConfiguration.class&#125;)</code>表示当前自动化配置需要在WebMvcAutoConfiguration之后才会完成；<br>（5）之后这个<code>FreeMarkerServletWebConfiguration</code>提供了一个有参的构造方法，里面注入了FreeMarkerProperties所对应的属性POJO类；<br>（6）当我们没有提供<code>FreeMarkerConfig</code>实例时，系统会自动提供一个<code>FreeMarkerConfigurer</code>实例。<code>FreeMarkerConfigurer</code>是一个类，实现了<code>FreeMarkerConfig</code>接口，里面定义了Freemarker的基本配置；<br>（7）<code>FreeMarkerViewResolver</code>则是FreeMarker视图解析器，上面使用了<code>@ConditionalOnMissingBean</code>和<code>@ConditionalOnProperty</code>注解表示只有当前环境中缺失<code>FreeMarkerViewResolver</code>对象和<code>spring.freemarker.enabled</code>属性值为true，系统会自动提供一个<code>FreeMarkerViewResolver</code>实例。</p>
<p>接下来我们再来看一下这个<code>FreeMarkerProperties</code>属性POJO类的源码，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">@ConfigurationProperties(</span><br><span class="line">    prefix = &quot;spring.freemarker&quot;</span><br><span class="line">)</span><br><span class="line">public class FreeMarkerProperties extends AbstractTemplateViewResolverProperties &#123;</span><br><span class="line">    public static final String DEFAULT_TEMPLATE_LOADER_PATH = &quot;classpath:/templates/&quot;;</span><br><span class="line">    public static final String DEFAULT_PREFIX = &quot;&quot;;</span><br><span class="line">    public static final String DEFAULT_SUFFIX = &quot;.ftlh&quot;;</span><br><span class="line">    private Map&lt;String, String&gt; settings = new HashMap();</span><br><span class="line">    private String[] templateLoaderPath = new String[]&#123;&quot;classpath:/templates/&quot;&#125;;</span><br><span class="line">    private boolean preferFileSystemAccess;</span><br><span class="line"></span><br><span class="line">    public FreeMarkerProperties() &#123;</span><br><span class="line">        super(&quot;&quot;, &quot;.ftlh&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Map&lt;String, String&gt; getSettings() &#123;</span><br><span class="line">        return this.settings;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setSettings(Map&lt;String, String&gt; settings) &#123;</span><br><span class="line">        this.settings = settings;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String[] getTemplateLoaderPath() &#123;</span><br><span class="line">        return this.templateLoaderPath;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public boolean isPreferFileSystemAccess() &#123;</span><br><span class="line">        return this.preferFileSystemAccess;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setPreferFileSystemAccess(boolean preferFileSystemAccess) &#123;</span><br><span class="line">        this.preferFileSystemAccess = preferFileSystemAccess;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setTemplateLoaderPath(String... templateLoaderPaths) &#123;</span><br><span class="line">        this.templateLoaderPath = templateLoaderPaths;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以看到这个<code>FreeMarkerProperties</code>属性POJO类中配置了FreeMarker的一些基本信息，如模板默认存放地址为<code>classpath:/templates/</code>，模板后缀为<code>.ftlh</code>，这些后续开发者可以在项目配置文件中进行覆盖。</p>
<p><strong>第二步</strong>，出于简单考虑，这里就不使用数据库了，直接定义一个实体类Book：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class Book &#123;</span><br><span class="line">    private int id;</span><br><span class="line">    private String name;</span><br><span class="line">    private int price;</span><br><span class="line">    //getter和setter方法，无参和全参构造方法</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>第三步</strong>，新建BookController类，提供一个访问数据的接口<code>/books</code>，注意它返回的是视图，因此不能使用<code>@RestController</code>注解，必须使用<code>@Controller</code>注解。</p>
<p>ModelAndView是模型数据和逻辑视图对象，它装载了模型的数据和逻辑视图，你可以通过<code>modelAndView.addObject(&quot;key&quot;,ojbect);</code>方式来添加模型数据，然后使用<code>modelAndView.setViewName(&quot;视图名称&quot;);</code>方式来设置逻辑视图。BookController类里面的代码为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@Controller</span><br><span class="line">public class BookController &#123;</span><br><span class="line">    @GetMapping(value = &quot;/books&quot;)</span><br><span class="line">    public ModelAndView books()&#123;</span><br><span class="line">        List&lt;Book&gt; books = Arrays.asList(</span><br><span class="line">                new Book(1, &quot;三国演义&quot;, 168),</span><br><span class="line">                new Book(2, &quot;红楼梦&quot;, 188),</span><br><span class="line">                new Book(2, &quot;西游记&quot;, 128),</span><br><span class="line">                new Book(2, &quot;水浒传&quot;, 108)</span><br><span class="line">        );</span><br><span class="line">        //实例化模型数据和逻辑视图对象</span><br><span class="line">        ModelAndView modelAndView = new ModelAndView();</span><br><span class="line">        //添加模型数据</span><br><span class="line">        modelAndView.addObject(&quot;books&quot;,books);</span><br><span class="line">        //设置逻辑视图</span><br><span class="line">        modelAndView.setViewName(&quot;index&quot;);</span><br><span class="line">        return modelAndView;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>第四步</strong>，在resources目录下的templates文件夹中新建<code>index.ftlh</code>（请注意这里的index就是你在<code>modelAndView.setViewName(&quot;index&quot;)</code>中设置的逻辑视图名称，这个需要保持一致），里面的代码为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;图书列表&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h2&gt;图书列表&lt;/h2&gt;</span><br><span class="line">&lt;table border=&quot;1px&quot;&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;图书编号&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;图书名称&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;图书价格&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;#if books ?? &amp;&amp; (books?size&gt;0) &gt;</span><br><span class="line">    &lt;#list books as book&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;$&#123;book.id&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;$&#123;book.name&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;$&#123;book.price&#125;&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;/#list&gt;</span><br><span class="line">    &lt;/#if&gt;</span><br><span class="line">&lt;/table&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>请注意首先你需要判断model中的books不为空且books中有数据，然后才能进行遍历，接着通过遍历books集合，将集合中的数据通过表格展示出来。</p>
<p><strong>第五步</strong>，启动项目。在浏览器地址栏中输入<code>http://localhost:8080/books</code>即可看到运行结果，如下图所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-c191dac8b552d921.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h3 id="自定义属性"><a href="#自定义属性" class="headerlink" title="自定义属性"></a>自定义属性</h3><p>如果开发者需要覆盖<code>FreeMarkerProperties</code>属性POJO类中的默认值，那么可以在<code>aplication.properties</code>文件中进行修改：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># HttpServletRequest的属性是否可以覆盖Controller中的model的同名项</span><br><span class="line">spring.freemarker.allow-request-override=false</span><br><span class="line"># HttpSession的属性是否可以覆盖Controller中的model的同名项</span><br><span class="line">spring.freemarker.allow-session-override=false</span><br><span class="line"># 是否开启缓存，开发时可设置为false，默认为true</span><br><span class="line">spring.freemarker.cache=false</span><br><span class="line"># 检查模板位置是否存在，默认为true</span><br><span class="line">spring.freemarker.check-template-location=true</span><br><span class="line"># 模板文件编码</span><br><span class="line">spring.freemarker.charset=UTF-8</span><br><span class="line"># 模板文件位置</span><br><span class="line">spring.freemarker.prefix=classpath:/templates/</span><br><span class="line"># Content-Type配置</span><br><span class="line">spring.freemarker.content-type=text/html</span><br><span class="line"># 模板文件后缀</span><br><span class="line">spring.freemarker.suffix=.ftlh</span><br><span class="line"># 是否将HttpServletRequest中的属性添加到Model中</span><br><span class="line">spring.freemarker.expose-request-attributes=false</span><br><span class="line"># 是否将HttpSession中的属性添加到Model中</span><br><span class="line">spring.freemarker.expose-session-attributes=false</span><br></pre></td></tr></table></figure>
<h1 id="FreeMarker详细使用"><a href="#FreeMarker详细使用" class="headerlink" title="FreeMarker详细使用"></a>FreeMarker详细使用</h1><h3 id="插值与表达式"><a href="#插值与表达式" class="headerlink" title="插值与表达式"></a>插值与表达式</h3><h5 id="直接输出值"><a href="#直接输出值" class="headerlink" title="直接输出值"></a>直接输出值</h5><p><strong>（1）数字。</strong>在FreeMarker中使用数字有两个注意事项：（a）小数点之前的0不能省略，即<code>0.1</code>不能写成<code>.1</code>；（b）对于1、+1、和1.0而言，它们是一致的。</p>
<p>查看一下如下的ftlh语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;#assign num=11&gt;</span><br><span class="line">&lt;div&gt;$&#123;num&#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p><code>&lt;#assign num=11&gt;</code>表示定义一个名为num的变量，值为11，然后通过<code>&lt;div&gt;$&#123;num&#125;&lt;/div&gt;</code>将其进行输出：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-a3f555bbff0fa4e3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>如果开发者需要输出人民币，可以使用如下语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;#assign num=11&gt;</span><br><span class="line">&lt;div&gt;$&#123;num?string.currency&#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>可以看到数字前面就多出了一个人民币符号：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-7ec18457cea5dd44.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>如果需要展示百分数，可以使用如下语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;#assign num=0.66&gt;</span><br><span class="line">&lt;div&gt;$&#123;num?string.percent&#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>可以看到数字就以百分数形式进行展示了：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-bdf44364e089a0de.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><strong>（2）字符串。</strong>在FreeMarker中可以使用如下方式直接输出字符串：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;$&#123;&quot;啃饼思录&quot;&#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>可以看到文字就直接显示了：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-1c36a2c4780f2646.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>如果要输出一些包含特殊符号的字符串，如<code>文件磁盘D:\测试</code>，那么需要使用<code>\</code>进行转义：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;$&#123;&quot;文件磁盘D:\\测试&quot;&#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>这样上述字符串才可以被显示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-aa0d710a9c9f8792.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>不过转义这种太麻烦了，尤其是字符串中包含很多需要转义的字符，此时可以在目标字符串引号之前添加r字符，表示自然转义，那么该目标字符串就会被直接输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;$&#123;r&quot;文件磁盘D:\测试&quot;&#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>这样上述字符串也是可以被显示的：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-aa0d710a9c9f8792.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><strong>（3）布尔值。</strong>在FreeMarker中布尔值可以直接定义，不需要使用引号引起来：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;#assign flag=false&gt;</span><br><span class="line">&lt;div&gt;$&#123;flag?string(&quot;A&quot;,&quot;B&quot;)&#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p><code>&lt;#assign flag=false&gt;</code>表示定义一个名为flag的变量，值为false，然后通过<code>&lt;div&gt;$&#123;flag?string(&quot;A&quot;,&quot;B&quot;)&#125;&lt;/div&gt;</code>将其进行输出，它判断flag值是否为true，如果是则输出A，否则输出B：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-d3d037ab0f463cb0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><strong>（4）集合。</strong>在FreeMarker中开发者可以直接定义一个集合，然后遍历该集合进行输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;#list [&quot;春天&quot;, &quot;夏天&quot;, &quot;秋天&quot;, &quot;冬天&quot;] as season&gt;</span><br><span class="line">    &lt;p&gt;$&#123;season&#125;&lt;/p&gt;</span><br><span class="line">&lt;/#list&gt;</span><br></pre></td></tr></table></figure>
<p>season表示其中的每个季节，遍历输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-6d8efa391c77df9e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>当然了，集合中的元素也可以是一个表达式，可以是字符串，不要求这些元素的类型是一致的，如下面的例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;#list [1+1,8-1,2*4,6/3,&quot;kenbingthoughts&quot;] as v&gt;</span><br><span class="line">    &lt;p&gt;$&#123;v&#125;&lt;/p&gt;</span><br><span class="line">&lt;/#list&gt;</span><br></pre></td></tr></table></figure>
<p>此时的遍历输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-c7a74172f07ffc46.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>如果你需要输出某些特殊的序列，如1-6这个序列，那么只需使用<code>1..6</code>来表示，而<code>6..1</code>则表示从6输出到1这个序列：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;顺序&lt;/p&gt;</span><br><span class="line">&lt;#list 1..6 as v1&gt;</span><br><span class="line">    &lt;text&gt;$&#123;v1&#125;&lt;/text&gt;</span><br><span class="line">&lt;/#list&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;倒序&lt;/p&gt;</span><br><span class="line">&lt;#list 6..1 as v2&gt;</span><br><span class="line">    &lt;text&gt;$&#123;v2&#125;&lt;/text&gt;</span><br><span class="line">&lt;/#list&gt;</span><br></pre></td></tr></table></figure>
<p>此时页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-37aa74f1b07537c9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>当然了这个集合中也是可以表示Map对象，Map对象是使用大括号括起来的，就像下面的：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;所有的key&lt;/p&gt;</span><br><span class="line">&lt;#list &#123;&quot;name&quot;: &quot;kenbingthoughts&quot;,&quot;nickName&quot;: &quot;kenbing&quot;&#125;?keys as k&gt;</span><br><span class="line">    &lt;text&gt;$&#123;k&#125;&lt;/text&gt;</span><br><span class="line">&lt;/#list&gt;</span><br><span class="line"></span><br><span class="line">&lt;p&gt;所有的value&lt;/p&gt;</span><br><span class="line">&lt;#list &#123;&quot;name&quot;: &quot;kenbingthoughts&quot;,&quot;nickName&quot;: &quot;kenbing&quot;&#125;?values as v&gt;</span><br><span class="line">    &lt;text&gt;$&#123;v&#125;&lt;/text&gt;</span><br><span class="line">&lt;/#list&gt;</span><br></pre></td></tr></table></figure>
<p>上面这两种语法分别表示遍历Map对象的所有key和value，页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-9288e318b06c6125.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h5 id="输出变量"><a href="#输出变量" class="headerlink" title="输出变量"></a>输出变量</h5><p>首先我们创建一个接口，然后准备一些数据，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@GetMapping(value = &quot;/test&quot;)</span><br><span class="line">public ModelAndView test()&#123;</span><br><span class="line">    List&lt;Book&gt; books = Arrays.asList(</span><br><span class="line">            new Book(1, &quot;三国演义&quot;, 168),</span><br><span class="line">            new Book(2, &quot;红楼梦&quot;, 188),</span><br><span class="line">            new Book(2, &quot;西游记&quot;, 128),</span><br><span class="line">            new Book(2, &quot;水浒传&quot;, 108)</span><br><span class="line">    );</span><br><span class="line">    Map&lt;String,String&gt; userMap = new HashMap&lt;&gt;();</span><br><span class="line">    userMap.put(&quot;name&quot;,&quot;kenbingthoughts&quot;);</span><br><span class="line">    userMap.put(&quot;nickName&quot;,&quot;kenbing&quot;);</span><br><span class="line">    userMap.put(&quot;website&quot;,&quot;kenbingthoughts.top&quot;);</span><br><span class="line">    ModelAndView modelAndView = new ModelAndView();</span><br><span class="line">    modelAndView.addObject(&quot;books&quot;,books);</span><br><span class="line">    modelAndView.addObject(&quot;userMap&quot;,userMap);</span><br><span class="line">    modelAndView.addObject(&quot;address&quot;,&quot;上海&quot;);</span><br><span class="line">    modelAndView.setViewName(&quot;index&quot;);</span><br><span class="line">    return modelAndView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>（1）普通变量。</strong>普通变量的展示很简单，直接通过变量名称就可以展示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;$&#123;address&#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-277f816f4f7fe50b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><strong>（2）集合变量。</strong>集合的展示有多种方式，如下所示，输出书籍信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;table border=&quot;1px&quot;&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;图书编号&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;图书名称&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;图书价格&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;#if books ?? &amp;&amp; (books?size&gt;0) &gt;</span><br><span class="line">    &lt;#list books as book&gt;</span><br><span class="line">      &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;$&#123;book.id&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;$&#123;book.name&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;$&#123;book.price&#125;&lt;/td&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line">    &lt;/#list&gt;</span><br><span class="line">    &lt;/#if&gt;</span><br><span class="line">&lt;/table&gt;</span><br></pre></td></tr></table></figure>
<p>页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-e4e2d1b4ce6c86a0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>如果你需要输出第三本书的名称（下标从0开始），只需将代码修改为如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">        $&#123;books[2].name&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-743ba6619195c750.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>如果要输出第二和三本书的名称，即子集合，此时只需将代码修改为如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;table border=&quot;1px&quot;&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;图书编号&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;图书名称&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;图书价格&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;#if books ?? &amp;&amp; (books?size&gt;0) &gt;</span><br><span class="line">    &lt;#list books[1..2] as book&gt;</span><br><span class="line">      &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;$&#123;book.id&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;$&#123;book.name&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;$&#123;book.price&#125;&lt;/td&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line">    &lt;/#list&gt;</span><br><span class="line">    &lt;/#if&gt;</span><br><span class="line">&lt;/table&gt;</span><br></pre></td></tr></table></figure>
<p>页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-a43788c473dd0934.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>如果开发者想要输出当前变量的下标，此时只需使用<code>变量名称_index</code>就可以输出下标信息，此时将代码修改为如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;table border=&quot;1px&quot;&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;图书下标&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;图书编号&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;图书名称&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;图书价格&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;#if books ?? &amp;&amp; (books?size&gt;0) &gt;</span><br><span class="line">    &lt;#list books[1..2] as book&gt;</span><br><span class="line">      &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;$&#123;book_index&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;$&#123;book.id&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;$&#123;book.name&#125;&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;$&#123;book.price&#125;&lt;/td&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line">    &lt;/#list&gt;</span><br><span class="line">    &lt;/#if&gt;</span><br><span class="line">&lt;/table&gt;</span><br></pre></td></tr></table></figure>
<p>页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-9ffb9e7be7e23400.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><strong>（3）Map变量。</strong>如果开发者想直接输出Map中的值，可以使用如下方式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;div&gt;$&#123;userMap.name&#125;&lt;/div&gt;</span><br><span class="line">    &lt;div&gt;$&#123;userMap[&#x27;name&#x27;]&#125;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-ba1bf7dd23e867b0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>如果要获取Map中的所有key并输出对应value的值，可以使用如下方式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;#list userMap?keys as k&gt;</span><br><span class="line">        &lt;div&gt;$&#123;k&#125;--$&#123;userMap[k]&#125;&lt;/div&gt;</span><br><span class="line">    &lt;/#list&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-dc9930b0c80ac259.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>如果只是单纯的想输出所有value的值，可以使用如下方式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;#list userMap?values as v&gt;</span><br><span class="line">        &lt;div&gt;$&#123;v&#125;&lt;/div&gt;</span><br><span class="line">    &lt;/#list&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-314c9d0155499af8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><strong>（4）字符串拼接。</strong>如果开发者想对字符串进行拼接，可以使用如下两种方式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;div&gt;$&#123;&quot;My name is $&#123;userMap.name&#125;&quot;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;div&gt;$&#123;&quot;My name is &quot;+ userMap.name&#125;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-119af75f1e5b184f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><strong>（5）字符串截取。</strong>如果开发者想对字符串进行截取，可以使用如下方式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;div&gt;$&#123;userMap.name[0..6]&#125;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-4a60bde2135f2308.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><strong>（6）集合相加。</strong>如果开发者想对集合相加，可以使用如下方式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;#list [&quot;春天&quot;, &quot;夏天&quot;, &quot;秋天&quot;, &quot;冬天&quot;] + [&quot;昨天&quot;,&quot;今天&quot;,&quot;明天&quot;] as time&gt;</span><br><span class="line">        &lt;p&gt;$&#123;time&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/#list&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-7c8e9598127e51a4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p><strong>（7）Map相加。</strong>如果开发者想对Map相加，可以使用如下方式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;#list (userMap +&#123;&#x27;sex&#x27;: &#x27;male&#x27;&#125;)?keys as key&gt;</span><br><span class="line">        &lt;p&gt;$&#123;key&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/#list&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-ef6ac02a55877216.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h5 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h5><p>FreeMarker支持一些常用的<code>+</code>、<code>-</code>、<code>*</code>、<code>/</code>、<code>%</code>等运算，举个例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;#assign num=1&gt;</span><br><span class="line">    &lt;div&gt;$&#123;num*2/2%2+2-2&#125;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-78ae43c2cb3e6f55.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h5 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h5><p>FreeMarker支持一些常用的比较运算操作，举个例子：<br>（1）= 或者 == 用于判断两个值是否相等；<br>（2）!=用于 判断两个值是否不等；<br>（3）&gt; 或者 gt 用于判断左边值是否大于右边值；<br>（4）&gt;= 或者 gte用于 判断左边值是否大于等于右边值；<br>（5）&lt; 或者 lt 用于判断左边值是否小于右边值；<br>（6）&lt;= 或者 lte 用于判断左边值是否小于等于右边值。<br>建议使用后面的英文符号，不要使用比较号，这样能避免带来一些不必要的错误。一些例子如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">        &lt;#assign num=1&gt;</span><br><span class="line">        &lt;#if num=1&gt; num=1&lt;/#if&gt;</span><br><span class="line">        &lt;#if num==1&gt; num==1&lt;/#if&gt;</span><br><span class="line">        &lt;#if num!=1&gt; num!=1&lt;/#if&gt;</span><br><span class="line">        &lt;#if num gt 1&gt; num gt 1&lt;/#if&gt;</span><br><span class="line">        &lt;#if num gte 1&gt; num gte 1&lt;/#if&gt;</span><br><span class="line">        &lt;#if num lt 1&gt; num lt 1&lt;/#if&gt;</span><br><span class="line">        &lt;#if num lte 1&gt; num lte 1&lt;/#if&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-a36534bcc210d689.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h5 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h5><p>FreeMarker中有三个逻辑运算符，分别是与（<code>&amp;&amp;</code>）或（<code>||</code>）非（<code>！</code>），注意逻辑运算符只能作用于布尔值，其他类型无法使用，这个很好理解：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;#assign num=1&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;#if num=1 &amp;&amp; 1 gt 2&gt; num=1 &amp;&amp; 1 gt 2 &lt;/#if&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;#if num=1 || 1 gt 2&gt; num=1 || 1 gt 2&lt;/#if&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        &lt;#if !(num=1)&gt; !(num=1)&lt;/#if&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-20549757c9901506.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h5 id="空值处理"><a href="#空值处理" class="headerlink" title="空值处理"></a>空值处理</h5><p>为了处理变量的空值，FreeMarker提供了两个运算符<code>!</code>和<code>??</code>，其中<code>!</code>用于指定缺失变量的默认值；<code>??</code>则用于判断某个变量是否存在。</p>
<p>举个例子，判断hobby变量是否存在，如果不存在则设置值为reading：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">        $&#123;hobby!&#x27;reading&#x27;&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-5169b74eb48321f3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>如果希望hobby变量不存在，则设置值为空字符串，那么可以有如下两种方式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">        $&#123;hobby!&#125;</span><br><span class="line">        $&#123;hobby!&quot;&quot;&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>也就是说如果<code>!</code>后面没有设置值，那么默认值就是空字符串。关于<code>FreeMarker</code>的更多资料可以点击 <a target="_blank" rel="noopener" href="https://freemarker.apache.org/">这里</a>，或者 <a target="_blank" rel="noopener" href="http://freemarker.foofun.cn/">国内翻译站</a> 。</p>
<h3 id="内建函数"><a href="#内建函数" class="headerlink" title="内建函数"></a>内建函数</h3><p>由于FreeMarker内置的函数有多个，因此这里只列举几个比较常用的进行学习，具体的可以点击  <a target="_blank" rel="noopener" href="http://freemarker.foofun.cn/ref_builtins.html">国内翻译站</a>  进行阅读。</p>
<h5 id="cap-first"><a href="#cap-first" class="headerlink" title="cap_first"></a>cap_first</h5><p><code>cap_first</code>可以让字符串的第一个字母变成大写，举个例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">        $&#123;&quot;kenbing&quot;?cap_first&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-7e52499da744d7fe.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h5 id="lower-case"><a href="#lower-case" class="headerlink" title="lower_case"></a>lower_case</h5><p><code>lower_case</code>可以让字符串转变成小写，举个例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">        $&#123;&quot;KENBING&quot;?lower_case&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-acae326c3126c2a8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h5 id="upper-case"><a href="#upper-case" class="headerlink" title="upper_case"></a>upper_case</h5><p><code>upper_case</code>可以让字符串转变成大写，举个例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">        $&#123;&quot;kenbing&quot;?upper_case&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-eebfbf741c1c4982.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h5 id="日期格式化"><a href="#日期格式化" class="headerlink" title="日期格式化"></a>日期格式化</h5><p>FreeMarker，举个例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;#assign someDate = &quot;10/25/1995&quot;?date(&quot;MM/dd/yyyy&quot;)&gt;</span><br><span class="line">    &lt;#assign someTime = &quot;15:05:30&quot;?time(&quot;HH:mm:ss&quot;)&gt;</span><br><span class="line">    &lt;#assign someDatetime = &quot;1995-10-25 03:05 PM&quot;?datetime(&quot;yyyy-MM-dd hh:mm&quot;)&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        $&#123;someDate&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        $&#123;someTime&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        $&#123;someDatetime&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-c548b74a5b2fa822.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h5 id="trim"><a href="#trim" class="headerlink" title="trim"></a>trim</h5><p><code>trim</code>可以去掉字符串前后的空白字符，举个例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;#assign str=&quot;  kenbing  &quot;&gt;</span><br><span class="line">    &lt;div&gt;$&#123;str?trim&#125;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-f81900974f23f854.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h5 id="int"><a href="#int" class="headerlink" title="int"></a>int</h5><p><code>int</code>可以获取数值的整数部分，举个例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;$&#123;3.1415926?int&#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-e306a3168c4a81e7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h5 id="size"><a href="#size" class="headerlink" title="size"></a>size</h5><p><code>size</code>可以获取序列中元素的个数，举个例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;$&#123;userMap?size&#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-e306a3168c4a81e7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h3 id="常用指令"><a href="#常用指令" class="headerlink" title="常用指令"></a>常用指令</h3><h5 id="if-else-elseif"><a href="#if-else-elseif" class="headerlink" title="if, else, elseif"></a>if, else, elseif</h5><p>这是分支控制语句，格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;#if condition&gt;</span><br><span class="line">  ...</span><br><span class="line">&lt;#elseif condition2&gt;</span><br><span class="line">  ...</span><br><span class="line">&lt;#elseif condition3&gt;</span><br><span class="line">  ...</span><br><span class="line">...</span><br><span class="line">&lt;#else&gt;</span><br><span class="line">  ...</span><br><span class="line">&lt;/#if&gt;</span><br></pre></td></tr></table></figure>
<p>注意这其中的condition和condition2都将被计算成布尔值的表达式，同时elseif 和else是可选的。详细使用细节可以参考 <a target="_blank" rel="noopener" href="http://freemarker.foofun.cn/ref_directive_if.html">这里</a> 。</p>
<h5 id="assign"><a href="#assign" class="headerlink" title="assign"></a>assign</h5><p>开发者可以使用该指令来创建一个新变量或者替换一个已存在的变量。注意仅仅顶级变量可以被创建/替换 (也就是说你不能创建/替换<code>some_hash.subvar</code>， 除了<code>some_hash</code>)，格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;#assign name1=value1 name2=value2 ... nameN=valueN&gt;</span><br><span class="line">或</span><br><span class="line">&lt;#assign same as above... in namespacehash&gt;</span><br><span class="line">或</span><br><span class="line">&lt;#assign name&gt;</span><br><span class="line">  capture this</span><br><span class="line">&lt;/#assign&gt;</span><br><span class="line">或</span><br><span class="line">&lt;#assign name in namespacehash&gt;</span><br><span class="line">  capture this</span><br><span class="line">&lt;/#assign&gt;</span><br></pre></td></tr></table></figure>
<p>关于变量的更多内容，请阅读：<a target="_blank" rel="noopener" href="http://freemarker.foofun.cn/dgui_misc_var.html">模板开发指南/其它/在模板中定义变量</a></p>
<h5 id="import"><a href="#import" class="headerlink" title="import"></a>import</h5><p>该指令用于引入一个库，即创建一个新的空命名空间， 然后在该命名空间中执行给定 path 参数中的模板， 所以模板用变量(宏，函数等)填充命名空间，之后新创建的命名空间对哈希表的调用者可用。 这个哈希表变量将会在命名空间中，由 import (就像你可以用 assign 指令来创建一样。) 的调用者被创建成一个普通变量，名字就是hash参数给定的：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;#import path as hash&gt;</span><br></pre></td></tr></table></figure>
<h6 id="switch-case-default-break"><a href="#switch-case-default-break" class="headerlink" title="switch, case, default, break"></a>switch, case, default, break</h6><p>switch, case, default, break是分支指令，有点类似于Java中的switch，格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;#switch value&gt;</span><br><span class="line">  &lt;#case refValue1&gt;</span><br><span class="line">    ...</span><br><span class="line">    &lt;#break&gt;</span><br><span class="line">  &lt;#case refValue2&gt;</span><br><span class="line">    ...</span><br><span class="line">    &lt;#break&gt;</span><br><span class="line">  ...</span><br><span class="line">  &lt;#case refValueN&gt;</span><br><span class="line">    ...</span><br><span class="line">    &lt;#break&gt;</span><br><span class="line">  &lt;#default&gt;</span><br><span class="line">    ...</span><br><span class="line">&lt;/#switch&gt;</span><br></pre></td></tr></table></figure>
<p>注意这里的break和default是可选的，不过笔者不太推荐使用这个指令，因为向下通过的行为容易出错，开发者可以使用 <a target="_blank" rel="noopener" href="http://freemarker.foofun.cn/ref_directive_if.html#ref.directive.elseif"><code>elseif</code></a>来代替， 除非想利用向下通过这种行为。</p>
<h5 id="include"><a href="#include" class="headerlink" title="include"></a>include</h5><p>include可以包含一个外部页面，格式如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;#include path&gt;</span><br><span class="line">或</span><br><span class="line">&lt;#include path options&gt;</span><br></pre></td></tr></table></figure>
<p>举个例子，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;#include &quot;./kenbing.ftlh&quot;&gt;</span><br></pre></td></tr></table></figure>
<h5 id="macro-nested-return"><a href="#macro-nested-return" class="headerlink" title="macro, nested, return"></a>macro, nested, return</h5><p>macro指令用于定义一个宏，由于宏在实际工作中用的比较多，所以这里建议还是看 <a target="_blank" rel="noopener" href="http://freemarker.foofun.cn/ref_directive_macro.html">官方文档</a> 最为合适。举个例子，这里我们定义一个名为book的宏，然后引用它：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;#macro book&gt;</span><br><span class="line">        西游记</span><br><span class="line">    &lt;/#macro&gt;</span><br><span class="line">    &lt;div&gt;&lt;@book/&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-4a3391caa128db6d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>当然了，在定义宏的时候也可以传入参数，那么此时在引入宏的时候，也需要传入对应的参数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;#macro books bs&gt;</span><br><span class="line">        &lt;table&gt;</span><br><span class="line">            &lt;#list bs as b&gt;</span><br><span class="line">                &lt;tr&gt;</span><br><span class="line">                    &lt;td&gt;$&#123;b&#125;&lt;/td&gt;</span><br><span class="line">                &lt;/tr&gt;</span><br><span class="line">            &lt;/#list&gt;</span><br><span class="line">        &lt;/table&gt;</span><br><span class="line">    &lt;/#macro&gt;</span><br><span class="line">    &lt;div&gt;&lt;@books [&quot;西游记&quot;,&quot;三国演义&quot;,&quot;水浒传&quot;,&quot;红楼梦&quot;]/&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>这里的bs其实就是定义的名为books的宏的参数，可以传入多个参数，所以我们在使用这个宏的时候通过集合也传入了参数。页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-9608f60aab860f25.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>除此之外，开发者还可以使用nested指令还引入开发者自定义的标签体，这个有点类似于Vue中的slot插槽这个概念，即只是起到一个占位的作用。举个例子，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;#macro books bs&gt;</span><br><span class="line">        &lt;table&gt;</span><br><span class="line">            &lt;#list bs as b&gt;</span><br><span class="line">                &lt;tr&gt;</span><br><span class="line">                    &lt;td&gt;$&#123;b&#125;&lt;/td&gt;</span><br><span class="line">                &lt;/tr&gt;</span><br><span class="line">            &lt;/#list&gt;</span><br><span class="line">            &lt;#nested&gt;</span><br><span class="line">        &lt;/table&gt;</span><br><span class="line">    &lt;/#macro&gt;</span><br><span class="line">    &lt;@books [&quot;西游记&quot;,&quot;三国演义&quot;,&quot;水浒传&quot;,&quot;红楼梦&quot;]&gt;</span><br><span class="line">        &lt;p&gt;啃饼思录&lt;/p&gt;</span><br><span class="line">    &lt;/@books&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-f01efefccd3a5ebf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<p>可以看到上面我们添加的p标签的内容就取代了books这一宏中的<code>&lt;#nested&gt;</code>标签所占据的位置。</p>
<p>在实际开发过程中，宏一般都是单独定义的，然后在使用的地方进行导入，定义一个名为<code>kenbing.ftlh</code>的文件，在里面定义一个名为books的宏：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;#macro books bs&gt;</span><br><span class="line">        &lt;table&gt;</span><br><span class="line">            &lt;#list bs as b&gt;</span><br><span class="line">                &lt;tr&gt;</span><br><span class="line">                    &lt;td&gt;$&#123;b&#125;&lt;/td&gt;</span><br><span class="line">                &lt;/tr&gt;</span><br><span class="line">            &lt;/#list&gt;</span><br><span class="line">            &lt;#nested&gt;</span><br><span class="line">        &lt;/table&gt;</span><br><span class="line">    &lt;/#macro&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>之后在<code>index.ftlh</code>文件中导入这个<code>kenbing.ftlh</code>文件并使用这个名为books的宏：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;#import &quot;./kenbing.ftlh&quot; as kb&gt;</span><br><span class="line">    &lt;@kb.books [&quot;西游记&quot;,&quot;三国演义&quot;,&quot;水浒传&quot;,&quot;红楼梦&quot;]&gt;</span><br><span class="line">        &lt;p&gt;啃饼思录&lt;/p&gt;</span><br><span class="line">    &lt;/@kb.books&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>注意宏需要先导入才能使用，否则会报找不到文件的错误。页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-f01efefccd3a5ebf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h5 id="noparse"><a href="#noparse" class="headerlink" title="noparse"></a>noparse</h5><p>noparse指令顾名思义就是不解析，因此如果开发者想直接在HTML页面上展示Freemarker语法，而不被页面渲染，那么就可以将Freemarker语法使用noparse指令包括起来：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;#noparse&gt;</span><br><span class="line">        &lt;#import &quot;./kenbing.ftlh&quot; as kb&gt;</span><br><span class="line">        &lt;@kb.books [&quot;西游记&quot;,&quot;三国演义&quot;,&quot;水浒传&quot;,&quot;红楼梦&quot;]&gt;</span><br><span class="line">            &lt;p&gt;啃饼思录&lt;/p&gt;</span><br><span class="line">        &lt;/@kb.books&gt;</span><br><span class="line">    &lt;/#noparse&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-bf6f4990eab2b0c1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h5 id="function-return"><a href="#function-return" class="headerlink" title="function, return"></a>function, return</h5><p>Freemarker中也允许开发者自定义函数，且函数是可以有返回值的，格式如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;#function name param1 param2 ... paramN&gt;</span><br><span class="line">  ...</span><br><span class="line">  &lt;#return returnValue&gt;</span><br><span class="line">  ...</span><br><span class="line">&lt;/#function&gt;</span><br></pre></td></tr></table></figure>
<p>举个例子，下面的函数用于计算两个数值的平均值，如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;#function avg x y&gt;</span><br><span class="line">        &lt;#return (x+y)/2&gt;</span><br><span class="line">    &lt;/#function&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">        $&#123;avg(12,18)&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>页面输出结果如下所示：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/8964398-c8179a2f0759bbcb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>本篇对FreeMarker模板引擎有了一个较为清晰的介绍，了解和学习这些基本上能满足日常的开发需要，如果开发者需要实现更具定制化的功能，需要点击 <a target="_blank" rel="noopener" href="http://freemarker.foofun.cn/">这里</a> ，阅读文档进行深度学习。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://envyzhan.asia">余思</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://envyzhan.asia/2022/04/26/9-what-you-need-to-know-about-freemarker-template-engine/">http://envyzhan.asia/2022/04/26/9-what-you-need-to-know-about-freemarker-template-engine/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://envyzhan.asia" target="_blank">余思博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/springboot/">springboot</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/05/18/10-use-springboot-and-vue-to-achieve-a-code-generator/"><img class="prev-cover" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">SpringBoot+Vue实现一个代码生成器</div></div></a></div><div class="next-post pull-right"><a href="/2022/04/15/8-customize-the-starter-scenario-launcher-in-springboot/"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">自定义SpringBoot中的Starter场景启动器</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/05/26/11-springboot-implements-timed-tasks/" title="SpringBoot实现定时任务"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-26</div><div class="title">SpringBoot实现定时任务</div></div></a></div><div><a href="/2022/06/01/12-springboot-realizes-the-repeated-reading-of-json-data/" title="SpringBoot实现JSON数据重复读取"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-06-01</div><div class="title">SpringBoot实现JSON数据重复读取</div></div></a></div><div><a href="/2022/08/02/15-springboot-integrates-canal-to-realize-data-incremental-synchronization/" title="SpringBoot整合Canal实现数据增量同步"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-02</div><div class="title">SpringBoot整合Canal实现数据增量同步</div></div></a></div><div><a href="/2022/03/20/4-dynamic-switching-of-visual-multiple-data-sources/" title="可视化多数据源动态切换"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-20</div><div class="title">可视化多数据源动态切换</div></div></a></div><div><a href="/2022/03/24/5-an-annotation-cooperates-with-redis-to-realize-interface-current-limition/" title="一个注解配合Redis实现接口限流"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-24</div><div class="title">一个注解配合Redis实现接口限流</div></div></a></div><div><a href="/2019/09/25/springboot-21-project-build-and-development/" title="项目构建与部署"><img class="cover" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-09-25</div><div class="title">项目构建与部署</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">余思</div><div class="author-info__description">记录成长路上的点滴</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">249</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">19</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">18</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:envyzhan@aliyun.com" target="_blank" title=""><i class="fa fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title=""><i class="fa fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎访问余思博客，一个技术博主的成长试验田！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2"><span class="toc-number">1.</span> <span class="toc-text">写在前面</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#FreeMarker"><span class="toc-number">2.</span> <span class="toc-text">FreeMarker</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#FreeMarker%E7%AE%80%E4%BB%8B"><span class="toc-number">2.0.1.</span> <span class="toc-text">FreeMarker简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FreeMarker%E6%A8%A1%E6%9D%BF%E6%96%87%E4%BB%B6%E5%8F%8A%E5%AD%98%E6%94%BE%E4%BD%8D%E7%BD%AE"><span class="toc-number">2.0.2.</span> <span class="toc-text">FreeMarker模板文件及存放位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E8%AF%95%E7%89%9B%E5%88%80"><span class="toc-number">2.0.3.</span> <span class="toc-text">小试牛刀</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7"><span class="toc-number">2.0.4.</span> <span class="toc-text">自定义属性</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#FreeMarker%E8%AF%A6%E7%BB%86%E4%BD%BF%E7%94%A8"><span class="toc-number">3.</span> <span class="toc-text">FreeMarker详细使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E5%80%BC%E4%B8%8E%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">3.0.1.</span> <span class="toc-text">插值与表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%9B%B4%E6%8E%A5%E8%BE%93%E5%87%BA%E5%80%BC"><span class="toc-number">3.0.1.0.1.</span> <span class="toc-text">直接输出值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E5%8F%98%E9%87%8F"><span class="toc-number">3.0.1.0.2.</span> <span class="toc-text">输出变量</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">3.0.1.0.3.</span> <span class="toc-text">算术运算符</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%AF%94%E8%BE%83%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">3.0.1.0.4.</span> <span class="toc-text">比较运算符</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">3.0.1.0.5.</span> <span class="toc-text">逻辑运算符</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A9%BA%E5%80%BC%E5%A4%84%E7%90%86"><span class="toc-number">3.0.1.0.6.</span> <span class="toc-text">空值处理</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E5%BB%BA%E5%87%BD%E6%95%B0"><span class="toc-number">3.0.2.</span> <span class="toc-text">内建函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#cap-first"><span class="toc-number">3.0.2.0.1.</span> <span class="toc-text">cap_first</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#lower-case"><span class="toc-number">3.0.2.0.2.</span> <span class="toc-text">lower_case</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#upper-case"><span class="toc-number">3.0.2.0.3.</span> <span class="toc-text">upper_case</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="toc-number">3.0.2.0.4.</span> <span class="toc-text">日期格式化</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#trim"><span class="toc-number">3.0.2.0.5.</span> <span class="toc-text">trim</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#int"><span class="toc-number">3.0.2.0.6.</span> <span class="toc-text">int</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#size"><span class="toc-number">3.0.2.0.7.</span> <span class="toc-text">size</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4"><span class="toc-number">3.0.3.</span> <span class="toc-text">常用指令</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#if-else-elseif"><span class="toc-number">3.0.3.0.1.</span> <span class="toc-text">if, else, elseif</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#assign"><span class="toc-number">3.0.3.0.2.</span> <span class="toc-text">assign</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#import"><span class="toc-number">3.0.3.0.3.</span> <span class="toc-text">import</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#switch-case-default-break"><span class="toc-number">3.0.3.0.3.1.</span> <span class="toc-text">switch, case, default, break</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#include"><span class="toc-number">3.0.3.0.4.</span> <span class="toc-text">include</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#macro-nested-return"><span class="toc-number">3.0.3.0.5.</span> <span class="toc-text">macro, nested, return</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#noparse"><span class="toc-number">3.0.3.0.6.</span> <span class="toc-text">noparse</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#function-return"><span class="toc-number">3.0.3.0.7.</span> <span class="toc-text">function, return</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">4.</span> <span class="toc-text">总结</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/03/01/2023-100-practice-of-function-switch-in-business/" title="功能开关在业务中的实践"><img src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="功能开关在业务中的实践"/></a><div class="content"><a class="title" href="/2023/03/01/2023-100-practice-of-function-switch-in-business/" title="功能开关在业务中的实践">功能开关在业务中的实践</a><time datetime="2023-03-01T09:55:30.000Z" title="发表于 2023-03-01 17:55:30">2023-03-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/26/2023-12-use-jenkins-gitlab-to-package-and-deploy-the-springboot-application/" title="使用Jenkins+Gitlab一键打包部署SpringBoot应用"><img src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用Jenkins+Gitlab一键打包部署SpringBoot应用"/></a><div class="content"><a class="title" href="/2023/02/26/2023-12-use-jenkins-gitlab-to-package-and-deploy-the-springboot-application/" title="使用Jenkins+Gitlab一键打包部署SpringBoot应用">使用Jenkins+Gitlab一键打包部署SpringBoot应用</a><time datetime="2023-02-26T14:55:30.000Z" title="发表于 2023-02-26 22:55:30">2023-02-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/24/2023-11-use-docker-compose-to-deploy-springboot-application/" title="使用Docker Compose部署SpringBoot应用"><img src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用Docker Compose部署SpringBoot应用"/></a><div class="content"><a class="title" href="/2023/02/24/2023-11-use-docker-compose-to-deploy-springboot-application/" title="使用Docker Compose部署SpringBoot应用">使用Docker Compose部署SpringBoot应用</a><time datetime="2023-02-24T02:55:30.000Z" title="发表于 2023-02-24 10:55:30">2023-02-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/23/2023-10-use-dockerfil-to-build-docker-image-for-springboot-application/" title="使用Dockerfile为SpringBoot应用构建Docker镜像"><img src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用Dockerfile为SpringBoot应用构建Docker镜像"/></a><div class="content"><a class="title" href="/2023/02/23/2023-10-use-dockerfil-to-build-docker-image-for-springboot-application/" title="使用Dockerfile为SpringBoot应用构建Docker镜像">使用Dockerfile为SpringBoot应用构建Docker镜像</a><time datetime="2023-02-23T10:15:33.000Z" title="发表于 2023-02-23 18:15:33">2023-02-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/20/2023-9-use-maven-plug-in-to-build-docker-image-for-springboot-application/" title="使用Maven插件为SpringBoot应用构建Docker镜像"><img src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用Maven插件为SpringBoot应用构建Docker镜像"/></a><div class="content"><a class="title" href="/2023/02/20/2023-9-use-maven-plug-in-to-build-docker-image-for-springboot-application/" title="使用Maven插件为SpringBoot应用构建Docker镜像">使用Maven插件为SpringBoot应用构建Docker镜像</a><time datetime="2023-02-20T03:51:30.000Z" title="发表于 2023-02-20 11:51:30">2023-02-20</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2017 - 2023  余思博客,记录成长</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk(Object.assign({
      clientID: '9996b44b488f2fc52124',
      clientSecret: '6bec0f8e9c032eeae6211a5d4cffa3c97e2d4a64',
      repo: 'blogcomment',
      owner: 'Envythink',
      admin: ['Envythink'],
      id: 'ace911128334cb5f0be0c690a4e5f46a',
      updateCountCallback: commentCount
    },))

    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    getScript('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Gitalk' === 'Gitalk' || !false) {
  if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script></div></div></body></html>