<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>Config健康监测 | 余思博客</title><meta name="description" content="Config健康监测"><meta name="keywords" content="springcloud"><meta name="author" content="余思"><meta name="copyright" content="余思"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Config健康监测"><meta name="twitter:description" content="Config健康监测"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><meta property="og:type" content="article"><meta property="og:title" content="Config健康监测"><meta property="og:url" content="http://envyzhan.top/2019/12/16/spring-cloud-config-3-health-monitoring/"><meta property="og:site_name" content="余思博客"><meta property="og:description" content="Config健康监测"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://envyzhan.top/2019/12/16/spring-cloud-config-3-health-monitoring/"><link rel="prev" title="Config客户端详解" href="http://envyzhan.top/2019/12/18/spring-cloud-config-4-detailed-explanation-of-client/"><link rel="next" title="Config服务端详解" href="http://envyzhan.top/2019/12/14/spring-cloud-config-2-detailed-explanation-of-server/"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js" defer></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":1,"translateDelay":0,"cookieDomain":"https://envythink.cn/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: {"languages":{"author":"作者: 余思","link":"链接: http://envyzhan.top/2019/12/16/spring-cloud-config-3-health-monitoring/","source":"来源: 余思博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  ClickShowText: undefined,
  medium_zoom: true,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.0"></head><body><canvas class="fireworks"></canvas><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">余思博客</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-html5" aria-hidden="true"></i><span> 前端</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/categories/html/"><i class="fa-fw fa fa-cog"></i><span> HTML/CSS</span></a></li><li><a class="site-page" href="/categories/javascript/"><i class="fa-fw fa fa-cogs"></i><span> JavaScript</span></a></li><li><a class="site-page" href="/categories/vuejs/"><i class="fa-fw fa fa-certificate"></i><span> Vue.js</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> Java</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/categories/java/"><i class="fa-fw fa fa-book"></i><span> Java</span></a></li><li><a class="site-page" href="/categories/ssm/"><i class="fa-fw fa fa-cube"></i><span> SSM</span></a></li><li><a class="site-page" href="/categories/springboot/"><i class="fa-fw fa fa-cubes"></i><span> SpringBoot</span></a></li><li><a class="site-page" href="/categories/springcloud/"><i class="fa-fw fa fa-cloud"></i><span> SpringCloud</span></a></li><li><a class="site-page" href="/categories/springsecurity/"><i class="fa-fw fa fa-bullseye"></i><span> SpringSecurity</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 运维</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/categories/pythonbase/"><i class="fa-fw fa fa-book"></i><span> Python</span></a></li><li><a class="site-page" href="/categories/go/"><i class="fa-fw fa fa-google-plus"></i><span> Golang</span></a></li><li><a class="site-page" href="/categories/devops/"><i class="fa-fw fa fa-road"></i><span> DevOps</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 中间件</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/categories/mysql/"><i class="fa-fw fa fa-database"></i><span> MySQL</span></a></li><li><a class="site-page" href="/categories/nginx/"><i class="fa-fw fa fa-location-arrow"></i><span> Nginx</span></a></li><li><a class="site-page" href="/categories/redis/"><i class="fa-fw fa fa-random"></i><span> Redis</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-bell" aria-hidden="true"></i><span> 其他</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/categories/datastructs/"><i class="fa-fw fa fa-plug"></i><span> 数据结构</span></a></li><li><a class="site-page" href="/categories/algorithm/"><i class="fa-fw fa fa-plane"></i><span> 算法建模</span></a></li><li><a class="site-page" href="/categories/tools/"><i class="fa-fw fa fa-hourglass"></i><span> 实用工具</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-address-book" aria-hidden="true"></i><span> 生活</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/categories/onenote/"><i class="fa-fw fa fa-laptop"></i><span> 个人随笔</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-comment"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">213</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">16</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">15</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-html5" aria-hidden="true"></i><span> 前端</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/categories/html/"><i class="fa-fw fa fa-cog"></i><span> HTML/CSS</span></a></li><li><a class="site-page" href="/categories/javascript/"><i class="fa-fw fa fa-cogs"></i><span> JavaScript</span></a></li><li><a class="site-page" href="/categories/vuejs/"><i class="fa-fw fa fa-certificate"></i><span> Vue.js</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> Java</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/categories/java/"><i class="fa-fw fa fa-book"></i><span> Java</span></a></li><li><a class="site-page" href="/categories/ssm/"><i class="fa-fw fa fa-cube"></i><span> SSM</span></a></li><li><a class="site-page" href="/categories/springboot/"><i class="fa-fw fa fa-cubes"></i><span> SpringBoot</span></a></li><li><a class="site-page" href="/categories/springcloud/"><i class="fa-fw fa fa-cloud"></i><span> SpringCloud</span></a></li><li><a class="site-page" href="/categories/springsecurity/"><i class="fa-fw fa fa-bullseye"></i><span> SpringSecurity</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 运维</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/categories/pythonbase/"><i class="fa-fw fa fa-book"></i><span> Python</span></a></li><li><a class="site-page" href="/categories/go/"><i class="fa-fw fa fa-google-plus"></i><span> Golang</span></a></li><li><a class="site-page" href="/categories/devops/"><i class="fa-fw fa fa-road"></i><span> DevOps</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 中间件</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/categories/mysql/"><i class="fa-fw fa fa-database"></i><span> MySQL</span></a></li><li><a class="site-page" href="/categories/nginx/"><i class="fa-fw fa fa-location-arrow"></i><span> Nginx</span></a></li><li><a class="site-page" href="/categories/redis/"><i class="fa-fw fa fa-random"></i><span> Redis</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-bell" aria-hidden="true"></i><span> 其他</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/categories/datastructs/"><i class="fa-fw fa fa-plug"></i><span> 数据结构</span></a></li><li><a class="site-page" href="/categories/algorithm/"><i class="fa-fw fa fa-plane"></i><span> 算法建模</span></a></li><li><a class="site-page" href="/categories/tools/"><i class="fa-fw fa fa-hourglass"></i><span> 实用工具</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-address-book" aria-hidden="true"></i><span> 生活</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/categories/onenote/"><i class="fa-fw fa fa-laptop"></i><span> 个人随笔</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-comment"></i><span> 留言</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#健康监测"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">健康监测</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#属性覆盖"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">属性覆盖</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#安全保护"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">安全保护</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#加密解密"><span class="toc_mobile_items-number"></span> <span class="toc_mobile_items-text">加密解密</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#前期准备"><span class="toc_mobile_items-number"></span> <span class="toc_mobile_items-text">前期准备</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#相关端点"><span class="toc_mobile_items-number"></span> <span class="toc_mobile_items-text">相关端点</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#配置密钥"><span class="toc_mobile_items-number"></span> <span class="toc_mobile_items-text">配置密钥</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#对称性加密"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">对称性加密</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-5"><a class="toc_mobile_items-link" href="#非对称性加密"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">非对称性加密</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#高可用配置"><span class="toc_mobile_items-number"></span> <span class="toc_mobile_items-text">高可用配置</span></a></div></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-5"><a class="toc-link" href="#健康监测"><span class="toc-number">1.</span> <span class="toc-text">健康监测</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#属性覆盖"><span class="toc-number">2.</span> <span class="toc-text">属性覆盖</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#安全保护"><span class="toc-number">3.</span> <span class="toc-text">安全保护</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#加密解密"><span class="toc-number"></span> <span class="toc-text">加密解密</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#前期准备"><span class="toc-number"></span> <span class="toc-text">前期准备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#相关端点"><span class="toc-number"></span> <span class="toc-text">相关端点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置密钥"><span class="toc-number"></span> <span class="toc-text">配置密钥</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#对称性加密"><span class="toc-number">1.</span> <span class="toc-text">对称性加密</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#非对称性加密"><span class="toc-number">2.</span> <span class="toc-text">非对称性加密</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#高可用配置"><span class="toc-number"></span> <span class="toc-text">高可用配置</span></a></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png)"><div id="post-info"><div id="post-title"><div class="posttitle">Config健康监测</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2019-12-16</time><span class="post-meta__separator">|</span><span><i class="fa fa-inbox post-meta__icon fa-fw" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/springcloud/">springcloud</a></span><div class="post-meta-wordcount"><i class="fa fa-file-word-o post-meta__icon fa-fw" aria-hidden="true"></i><span>字数总计:</span><span class="word-count">3.7k</span><span class="post-meta__separator">|</span><i class="fa fa-clock-o post-meta__icon fa-fw" aria-hidden="true"></i><span>阅读时长: 11 分钟</span><div class="post-meta-pv-cv"><span class="post-meta__separator">|</span><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>阅读量:</span><span id="busuanzi_value_page_pv"></span><span class="post-meta__separator">|</span><i class="fa fa-comments-o post-meta__icon fa-fw" aria-hidden="true"></i><span>评论数:</span><a href="/2019/12/16/spring-cloud-config-3-health-monitoring/#post-comment"><span class="gitalk-comment-count comment-count"></span></a></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><html><head></head><body><h5 id="健康监测"><a href="#健康监测" class="headerlink" title="健康监测"></a>健康监测</h5><p>当使用占位符来配置URI的时候，Spring Cloud Config会为配置中心服务端创建一个健康监测器，该检测器中默认构建了一个application为app的仓库。而根据之前的配置规则：{application}-config.git，该检测器会不断地检查<code>https://github.com/licheetools/app-config</code>仓库是否可以连通（此处的app就是上面的{application}）。此时我们可以访问配置中心的/health端点来查看它的健康状态，如果无法连通<code>https://github.com/licheetools/app-config</code>仓库，那么配置中心的可用状态将是DOWN。虽然我们依然可以通过URI的方式来访问该配置中心，但是当我们将这个配置中心当做一个服务来使用的时候，那么它的状态将会影响到它的服务可用性判断，因此了解它的健康监测配置对于微服务架构来说显得尤为重要。</p>
<p>其实我们可以直接在Git仓库中创建一个名为app-config的配置库，让健康检测器能够访问到它。当然了，我们也可以配置一个实际存在的仓库来进行连通检测。举个例子，笔者已经在GitHub上配置了一个envy-config仓库，接下来就通过它来进行监控检测。首先在application.properties配置文件中添加如下配置：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spring.cloud.config.server.git.uri=https://github.com/licheetools/{application}-config</span><br><span class="line">spring.cloud.config.server.git.username=username</span><br><span class="line">spring.cloud.config.server.git.password=password</span><br><span class="line">spring.cloud.config.server.health.repositories.check.name=envy</span><br><span class="line">spring.cloud.config.server.health.repositories.check.label=label</span><br><span class="line">spring.cloud.config.server.health.repositories.check.profiles=default</span><br></pre></td></tr></tbody></table></figure></div>
<p>请注意，由于健康监测的repositories是一个Map对象，所以在实际使用的时候我们可以配置多个值，且每个配置中包含了与定位仓库地址时需要的三个元素：name表示应用名称；label表示分支名；profiles表示环境名。</p>
<p>当然了，如果不想使用该健康监测器，可以使用<code>spring.cloud.config.server.health.enabled=false</code>参数来关闭它，不过笔者建议在实际开发过程中还是尽量开启健康监测功能。</p>
<h5 id="属性覆盖"><a href="#属性覆盖" class="headerlink" title="属性覆盖"></a>属性覆盖</h5><p>Config Server也提供了属性覆盖的特性，它可以让开发人员为所有的应用提供配置属性，开发者只需在配置文件中通过<code>spring.cloud.config.server.overrides</code>属性来设置键值对的参数，这些参数都会以Map的方式加载到客户端的配置中。举个例子：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spring.cloud.config.server.overrides.name=envythink</span><br><span class="line">spring.cloud.config.server.overrides.from=beijing</span><br></pre></td></tr></tbody></table></figure></div>
<p>通过该属性配置的参数，是不允许被Spring Cloud客户端所修改的，且Spring Cloud客户端从Config Server中获取配置信息时，都会取得这些配置信息。也就是我们在Spring Cloud服务端设置的信息，在Spring Cloud客户端只有读取的权限，这个特性可以很方便的给Spring Cloud应用配置一些共同属性或者是默认的属性。当然客户端的优先级是高于服务端的，因此我们可以通过改变客户端中更高优先级的配置方式（如配置环境变量或是系统属性），来选择是否使用Config Server提供的默认值。</p>
<h5 id="安全保护"><a href="#安全保护" class="headerlink" title="安全保护"></a>安全保护</h5><p>一般来说配置中心存储的信息都是较为敏感的，因此都需要做一些安全处理，给配置中心实现安全保护的方式有很多，如物理网络限制、OAuth2授权等，这些都是不错的选择，但是考虑到微服务应用和配置中心都是建立在SpringBoot上，因此使用Spring家族自身的安全框架SpringSecurity则是更为明智的选择。那么如何使用SpringSecurity来给配置中心设置安全访问呢？</p>
<p>首先在pom.xml文件中，引入SpringSecurity的依赖，如下所示：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><dependency></dependency></span><br><span class="line">      <groupid>org.springframework.boot</groupid></span><br><span class="line">      <artifactid>spring-boot-starter-security</artifactid></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure></div>
<p>其实这样我们就给这个config-server项目添加了访问保护，此时可以启动该项目，然后直接访问配置中心，就会出现登录框，默认的用户名是user，密码则是在每次启动的时候在控制台都会随机的输出，显然这种方式是不合理的。正确的做法是在application.yml配置文件中指定用户的账号和密码等信息，如下所示：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spring.security.user.name=envy</span><br><span class="line">spring.security.user.password=password</span><br></pre></td></tr></tbody></table></figure></div>
<p>这样我们就为config-server项目设置了安全保护，光这样是不够的，我们还需要在客户端中设置对应的安全信息，否则会在获取配置信息的时候返回401错误。</p>
<p><a href="https://upload-images.jianshu.io/upload_images/8964398-c9b1d289c3fbe748.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title class="mediumZoom lazyload" data-src="https://upload-images.jianshu.io/upload_images/8964398-c9b1d289c3fbe748.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></a></p>
<p>因此需要在config-client项目的bootstrap.properties启动文件中添加安全信息来通过上述验证，如用户名和密码等信息，如下所示：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spring.cloud.config.username=envy</span><br><span class="line">spring.cloud.config.password=password</span><br></pre></td></tr></tbody></table></figure></div>
<h1 id="加密解密"><a href="#加密解密" class="headerlink" title="加密解密"></a>加密解密</h1><p>在微服务架构中，我们通常会采用DevOps的组织方式来降低因团队间沟通所造成的巨大成本，以加速微服务应用的交付能力。这就使得原来由运维团队控制的线上信息直接交到由微服务所属组织的成员来自行维护，按照前面的配置，这些大量的敏感信息，如数据库的账户与密码等将会直接以明文的形式存储于微服务应用的配置文件中，这是非常危险的操作。</p>
<p>针对上述危险情况，Spring Cloud Config提供了对属性加密的功能，以保护配置文件中的信息安全。那么如何在配置中心使用该属性加密功能呢？</p>
<h3 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h3><p>默认情况下，JRE中自带了JCE(Unlimited Strength Java Cryptography Extension)，但是它是一个有限长度的版本，而这里需要一个不限长度的JCE，因此需要在Oracle官网 <a href="https://www.oracle.com/java/technologies/javase-jce8-downloads.html" target="_blank" rel="noopener">下载</a> 后进行解压，可以得到3个文件，如下所示：</p>
<p><a href="https://upload-images.jianshu.io/upload_images/8964398-8a1ae09595937983.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title class="mediumZoom lazyload" data-src="https://upload-images.jianshu.io/upload_images/8964398-8a1ae09595937983.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></a></p>
<p>然后我们需要将这里面的2个jar包复制到<code>%JAVA_HOME%\jre\lib\security\policy\unlimited</code>目录下，以覆盖之前的默认Jar包，这样前期工作就完成了。</p>
<h3 id="相关端点"><a href="#相关端点" class="headerlink" title="相关端点"></a>相关端点</h3><p>前期准备工作完成后，接下来就可以尝试启动配置中心，然后访问<code>http://localhost:4001/encrypt/status</code>链接，可以看到页面出现下面的信息：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">description: "The encryption algorithm is not strong enough",</span><br><span class="line">status: "INVALID"</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></div>
<p>那是因为此时还没有为加密服务配置对应的密钥，所以当前配置中心的加密功能还是不能使用的。</p>
<p>当然除了/encrypt/status接口外，还有其他的接口，这些接口的含义如下所示：</p>
<ul>
<li>/encrypt/status：查看加密功能状态的端点；</li>
<li>/key：查看密钥的端点；</li>
<li>/encrypt：对请求的body内容进行加密的端点；</li>
<li>/decrypt：对请求的body内容进行解密的端点。<h3 id="配置密钥"><a href="#配置密钥" class="headerlink" title="配置密钥"></a>配置密钥</h3>加密方式有两种：对称性加密和非对称性加密。<h5 id="对称性加密"><a href="#对称性加密" class="headerlink" title="对称性加密"></a>对称性加密</h5>对称性加密比较简单，直接配置密钥就可以，首先理清思路，我们是在服务端加密后再由客户端解密，因此需要在config-server项目的bootstrap.properties启动文件中（必须是该文件）指定密钥信息，如下所示：<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">encrypt.key=envythink</span><br></pre></td></tr></tbody></table></figure></div>
之后重启配置中心（config-server项目），然后在浏览器中访问<code>http://localhost:4001/encrypt/status</code>链接，可以看到输出结果为：</li>
</ul>
<p><a href="https://upload-images.jianshu.io/upload_images/8964398-2593d1d26e2f4b5e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title class="mediumZoom lazyload" data-src="https://upload-images.jianshu.io/upload_images/8964398-2593d1d26e2f4b5e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></a></p>
<p>出现上面的结果就表示配置中心的加密解密功能就可以使用了。接着就可以使用上面介绍的<code>/encrypt</code>和<code>/decrypt</code>接口来对请求的内容进行加密和解密处理，需要注意的是这两个端点都是POST请求，加密信息需要通过请求体来发送。如果开发者本地有POSTMAN、RestClient等测试工具，则可按照如下进行演示（为了更好的演示，可以将之前添加的<code>spring-boot-starter-security</code>依赖给注释掉，避免因为权限验证而导致的各种问题）：</p>
<p>这个例子是使用<code>/encrypt</code>对envythink.com字符串进行先加密的结果：</p>
<p><a href="https://upload-images.jianshu.io/upload_images/8964398-85adaa53464931f1.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title class="mediumZoom lazyload" data-src="https://upload-images.jianshu.io/upload_images/8964398-85adaa53464931f1.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></a></p>
<p>这是对上面加密后的结果进行解密后得到的结果，可以看到和前面完全一样：</p>
<p><a href="https://upload-images.jianshu.io/upload_images/8964398-94f1295fda25119e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title class="mediumZoom lazyload" data-src="https://upload-images.jianshu.io/upload_images/8964398-94f1295fda25119e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></a></p>
<p>当然了，如果开发者本地没有按照POSTMAN等测试工具，则可以使用curl命令来验证接口，如下图所示：</p>
<p><a href="https://upload-images.jianshu.io/upload_images/8964398-fd8508c0f8d3e74a.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title class="mediumZoom lazyload" data-src="https://upload-images.jianshu.io/upload_images/8964398-fd8508c0f8d3e74a.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></a></p>
<p>这里我们通过采用对称加密方式在服务器端配置encrypt.key参数来指定密钥，可以看到它操作起来教务方便，只需一个参数即可。此外开发者也可以使用环境变量ENCRYPT_KEY来进行配置，让密钥信息外部化存储。</p>
<p>还有一个问题就是上面都是在服务器端对属性进行了加密和解码，而实际情况则是在服务端对属性进行加密，而在客户端对属性进行解密，且这种解密最好是可以自动进行，Spring Cloud Config就是这样实现的。</p>
<p>Spring Cloud Config通过在属性值前使用<code>{cipher}</code>前缀来标准给内容是一个加密值，当微服务客户端加载配置的时候，配置中心就自动会为带有<code>{cipher}</code>前缀的值进行解密。通过这种机制，运维团队就可以放心的将线上信息的加密资源给微服务团队，不用担心敏感信息的泄露问题了。</p>
<p>将下来尝试将之前envy-prod.yml配置文件中<code>envythink: prod-1.0</code>Map对象对应的value值prod-1.0进行加密和解密处理：</p>
<p><a href="https://upload-images.jianshu.io/upload_images/8964398-759126e11cb08e41.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title class="mediumZoom lazyload" data-src="https://upload-images.jianshu.io/upload_images/8964398-759126e11cb08e41.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></a></p>
<p><a href="https://upload-images.jianshu.io/upload_images/8964398-5135e2c36fdd1741.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title class="mediumZoom lazyload" data-src="https://upload-images.jianshu.io/upload_images/8964398-5135e2c36fdd1741.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></a></p>
<p>然后将这个加密后的一串字符串复制到之前的envy-prod.yml配置文件中，如下所示：</p>
<p><a href="https://upload-images.jianshu.io/upload_images/8964398-82d8102cab5b7b42.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title class="mediumZoom lazyload" data-src="https://upload-images.jianshu.io/upload_images/8964398-82d8102cab5b7b42.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></a></p>
<p>请注意上面的字符串必须以<code>{cipher}</code>开头，表示该值是一个加密字符，这样配置中心config-server在获取到这个值之后会先对该值进行解密，解密之后才会返回给客户端进行使用。</p>
<p>接着将这个配置文件通过Git上传到GitHub仓库，然后启动配置中心，最后去浏览器地址栏中访问该envy-prod.yml文件，即可得到想要的数据。</p>
<h5 id="非对称性加密"><a href="#非对称性加密" class="headerlink" title="非对称性加密"></a>非对称性加密</h5><p>Spring Cloud Config的配置中心不仅可以使用对称性加密，而且还可以使用非对称性加密，如RSA密钥对，尽管非对称加密的密钥生成与配置相对来说较为复杂一些，但是它具有更高的安全性。一般来说，在企业中安全始终是摆在第一位的，因此接下来开始学习如何使用非对称性加密。</p>
<p>第一步，使用keytool工具来生成密钥对。JDK自带了一个密钥和证书管理工具keytool，它可以让用户管理自己的公钥/私钥对以及相关证书，用于（通过数字签名）认证（用户向其他用户/服务认证自己）或数据完整性以及认证服务。这个工具所在的地址是<code>%JAVA_HOME%\bin\keytool.exe</code>，如下所示：</p>
<p><a href="https://upload-images.jianshu.io/upload_images/8964398-e356126b98b7b22b.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title class="mediumZoom lazyload" data-src="https://upload-images.jianshu.io/upload_images/8964398-e356126b98b7b22b.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></a></p>
<p>可以使用如下命令来生成密钥：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keytool -genkeypair -alias config-server -keyalg RSA -keystore config-server.keystore</span><br></pre></td></tr></tbody></table></figure></div>
<p><a href="https://upload-images.jianshu.io/upload_images/8964398-8dfe3dd8f36ed2a0.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title class="mediumZoom lazyload" data-src="https://upload-images.jianshu.io/upload_images/8964398-8dfe3dd8f36ed2a0.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></a></p>
<p>如果不想逐步输入那些提示信息，可以使用<code>-dname</code>参数来直接指定，而密钥库口令与密钥口令可使用<code>-storepass</code>和<code>-keypass</code>来直接指定，这样可以通过下面的命令直接创建出和前面一样的密钥库：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">keytool -genkeypair -alias config-server -keyalg RSA \</span><br><span class="line">-dname "CN=envythink, OU=company, O=organization, L=city, ST=province, C=china" \</span><br><span class="line">-keypass 666666 \</span><br><span class="line">-keystore config-server.keystore \</span><br><span class="line">-storepass 888888\</span><br></pre></td></tr></tbody></table></figure></div>
<p>但是默认情况下使用上述命令创建的密钥只有90天的有效期，如果开发者想调整它的有效期，可以在上述命令中增加<code>-validity</code>参数来实现。我们可以通过使用下面的命令来让密钥的有效期延长到一年，如下所示：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">keytool -genkeypair -alias config-server -keyalg RSA \</span><br><span class="line">-dname "CN=envythink, OU=company, O=organization, L=city, ST=province, C=china" \</span><br><span class="line">-keypass 666666 \</span><br><span class="line">-keystore config-server.keystore \</span><br><span class="line">-storepass 888888 \</span><br><span class="line">-validity 365 \</span><br></pre></td></tr></tbody></table></figure></div>
<p>最后会在当前执行命令的目录下生成一个名为config-server.keystore的文件。</p>
<p>第二步，移动密钥至资源目录。将之前生成的config-server.keystore文件移动到config-server项目的src\main\resources目录下，并在该项目的bootstrap.properties文件中添加如下配置信息：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">encrypt.key-store.location=config-server.keystore</span><br><span class="line">encrypt.key-store.alias=config-server</span><br><span class="line">encrypt.key-store.password=envythink</span><br><span class="line">encrypt.key-store.secret=envythink</span><br></pre></td></tr></tbody></table></figure></div>
<p>当然非对称加密的配置信息也可以通过环境变量的方式来进行配置，它们对应的具体变量名如下所示：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">Code</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ENCRYPT_KEY_STORE_LOCATION</span><br><span class="line">ENCRYPT_KEY_STORE_ALIAS</span><br><span class="line">ENCRYPT_KEY_STORE_PASSWORD</span><br><span class="line">ENCRYPT_KEY_STORE_SECRET</span><br></pre></td></tr></tbody></table></figure></div>
<p>使用环境变量这种方式来配置密钥库相关信息，可以获得更好的安全性，因此建议将敏感口令信息存储在配置中心的环境变量中。</p>
<h3 id="高可用配置"><a href="#高可用配置" class="headerlink" title="高可用配置"></a>高可用配置</h3><p>一般来说我们都希望应用都是高可用的，因此当将配置中心部署到生产环境中时，也应该和服务注册中心一样采用多节点模式。Spring Cloud Config实现服务端的高可用非常简单，有以下两种方式：<br><strong>（1）传统模式。</strong>这种方式非常简单，开发者不需要为这些服务端做任何额外的配置，所有的Config Server都遵循一个配置规则，都指向同一个Git仓库，这样所有的配置内容就通过统一的共享文件系统来维护。而客户端在指定Config Server位置时，只需配置Config Server上层的负载均衡设备地址即可，相应的结构图如下所示：</p>
<p><a href="https://upload-images.jianshu.io/upload_images/8964398-c789c9d97caaffc0.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" target="_blank" rel="noopener" data-fancybox="group" data-caption class="fancybox"><img alt title class="mediumZoom lazyload" data-src="https://upload-images.jianshu.io/upload_images/8964398-c789c9d97caaffc0.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"></a></p>
<p><strong>（2）服务模式。</strong>我们还可以将Config Server作为一个普通的微服务应用并纳入Eureka的服务治理体系中。这样我们的微服务应用就可以通过配置中心的服务名来获取配置信息，这种方式和传统模式相比更适合维护，因为对于服务端的负载均衡配置和客户端的配置中心指定都通过服务治理机制一起解决了，也就是说它既实现了高可用，又实现了自我维护，因此笔者建议优先考虑服务模式，因为它完全符合微服务的思想。</p>
<p>那么到这里关于Spring Cloud Config分布式配置中心服务端配置的介绍就学习到这，后续开始学习客户端的配置。</p>
</body></html></div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">余思</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://envyzhan.top/2019/12/16/spring-cloud-config-3-health-monitoring/">http://envyzhan.top/2019/12/16/spring-cloud-config-3-health-monitoring/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://envyzhan.top">余思博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/springcloud/">springcloud    </a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2019/12/18/spring-cloud-config-4-detailed-explanation-of-client/"><img class="prev_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>Config客户端详解</span></div></a></div><div class="next-post pull_right"><a href="/2019/12/14/spring-cloud-config-2-detailed-explanation-of-server/"><img class="next_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>Config服务端详解</span></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2019/12/29/spring-cloud-sleuth-4-data-storage/" title="Sleuth数据存储"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2021-03-01</div><div class="relatedPosts_title">Sleuth数据存储</div></div></a></div><div class="relatedPosts_item"><a href="/2019/12/28/spring-cloud-sleuth-3-integrating-zipkin/" title="Sleuth整合Zipkin"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2021-03-01</div><div class="relatedPosts_title">Sleuth整合Zipkin</div></div></a></div><div class="relatedPosts_item"><a href="/2019/12/26/spring-cloud-sleuth-2-integrating-elk/" title="Sleuth整合ELK"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2021-03-01</div><div class="relatedPosts_title">Sleuth整合ELK</div></div></a></div><div class="relatedPosts_item"><a href="/2019/12/25/spring-cloud-sleuth-1-basic-used/" title="Sleuth基础使用"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2021-03-01</div><div class="relatedPosts_title">Sleuth基础使用</div></div></a></div><div class="relatedPosts_item"><a href="/2019/12/24/spring-cloud-stream-1-basic-used/" title="Stream基础使用"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2021-03-01</div><div class="relatedPosts_title">Stream基础使用</div></div></a></div><div class="relatedPosts_item"><a href="/2019/12/23/spring-cloud-bus-3-integrating-kafka/" title="Bus整合Kafka"><img class="relatedPosts_cover lazyload"data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2021-03-01</div><div class="relatedPosts_title">Bus整合Kafka</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: '9996b44b488f2fc52124',
  clientSecret: '6bec0f8e9c032eeae6211a5d4cffa3c97e2d4a64',
  repo: 'blogcomment',
  owner: 'Envythink',
  admin: 'Envythink',
  id: md5(decodeURI(location.pathname)),
  language: 'zh-CN',
  updateCountCallback: commentCount
})
gitalk.render('gitalk-container')

function commentCount(n){
  document.getElementsByClassName('gitalk-comment-count')[0].innerHTML= n
}</script></div></div></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">Copyright &copy;2017-2021 余思博客, 版权所有</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">簡</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/fireworks.js"></script><script src="/js/tw_cn.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>